# æ•°æ®é©±åŠ¨ä¼˜åŒ–è®¾è®¡æ–‡æ¡£ï¼ˆKISSç‰ˆæœ¬ï¼‰

**ç‰ˆæœ¬**: v1.0 KISS Edition
**åˆ›å»ºæ—¥æœŸ**: 2025-01-17
**è®¾è®¡åŸåˆ™**: Keep It Simple, Stupid
**çŠ¶æ€**: âœ… Design Approved

---

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è®¾è®¡AutoAdsçš„**æ•°æ®é©±åŠ¨æŒç»­ä¼˜åŒ–**åŠŸèƒ½ï¼Œéµå¾ªKISSåŸåˆ™ï¼š
- âœ… **ç®€å•ç›´æ¥**ï¼šåˆ©ç”¨ç°æœ‰æ•°æ®ï¼Œç®€å•è§„åˆ™å¼•æ“
- âœ… **å¿«é€ŸéªŒè¯**ï¼š1å‘¨äº¤ä»˜ï¼Œç«‹å³éªŒè¯ç”¨æˆ·éœ€æ±‚
- âœ… **ä½é£é™©**ï¼šä¸å¼•å…¥å¤æ‚ç®—æ³•ï¼Œæ˜“äºè°ƒæ•´
- âœ… **ç”¨æˆ·å¯æ§**ï¼šæ‰€æœ‰ä¼˜åŒ–éœ€ç”¨æˆ·ç¡®è®¤ï¼Œä¸è‡ªåŠ¨æ‰§è¡Œ

---

## ğŸ¯ æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šå¦‚ä½•å¿«é€Ÿæµ‹è¯•Offerçš„æŠ•æ”¾æ•ˆæœï¼Ÿ
**ç°çŠ¶**ï¼šT+1æ•°æ®å»¶è¿Ÿï¼Œéœ€ç­‰å¾…è‡³å°‘1å¤©æ‰èƒ½çœ‹åˆ°æ•°æ®

**KISSè§£å†³æ–¹æ¡ˆ**ï¼šåŸºäºå‰100æ¬¡å±•ç¤ºçš„**æ—©æœŸä¿¡å·é¢„æµ‹**
- âœ… åˆ©ç”¨ç°æœ‰T+1æ•°æ®ï¼ˆä¸éœ€è¦å®æ—¶è¿½è¸ªç³»ç»Ÿï¼‰
- âœ… ç®€å•çš„ç»Ÿè®¡å¯¹æ¯”ï¼ˆCTR vs è¡Œä¸šå‡å€¼ï¼‰
- âœ… å‰ç«¯è®¡ç®—ï¼Œæ— éœ€åç«¯æ”¹åŠ¨

**å®ç°æ—¶é—´**ï¼š30åˆ†é’Ÿ

---

### é—®é¢˜2ï¼šå¦‚ä½•å¿«é€Ÿç­›é€‰å‡ºè¡¨ç°å¥½çš„å¹¿å‘Šï¼Ÿ
**ç°çŠ¶**ï¼šéœ€æ‰‹åŠ¨å¯¹æ¯”3ä¸ªå˜ä½“æ•°æ®ï¼Œç­‰å¾…7-14å¤©

**KISSè§£å†³æ–¹æ¡ˆ**ï¼š**Campaignå¯¹æ¯”è§†å›¾** + è§„åˆ™åŒ–å»ºè®®
- âœ… å¹¶æ’å±•ç¤ºåŒä¸€Offerçš„æ‰€æœ‰å˜ä½“
- âœ… è‡ªåŠ¨æ ‡è¯†Winnerï¼ˆæŒ‰CTR/CPC/ROIæ’åºï¼‰
- âœ… è§„åˆ™åŒ–å»ºè®®ï¼ˆCTR < Winnerçš„50% â†’ å»ºè®®æš‚åœï¼‰
- âœ… ä¸€é”®åº”ç”¨ä¼˜åŒ–

**å®ç°æ—¶é—´**ï¼š3å¤©

---

### é—®é¢˜3ï¼šå¦‚ä½•åŸºäºè¡¨ç°æ•°æ®ä¼˜åŒ–AIåˆ›æ„ç”Ÿæˆï¼Ÿ
**ç°çŠ¶**ï¼šAIç”Ÿæˆæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ— æ³•ä»è¡¨ç°æ•°æ®ä¸­å­¦ä¹ 

**KISSè§£å†³æ–¹æ¡ˆ**ï¼š**AIè‡ªåŠ¨å­¦ä¹ å†å²é«˜CTRåˆ›æ„**
- âœ… ç³»ç»Ÿè‡ªåŠ¨æŸ¥è¯¢ç”¨æˆ·å†å²CTR > 3%çš„åˆ›æ„
- âœ… AIç”Ÿæˆæ—¶å‚è€ƒæˆåŠŸæ¡ˆä¾‹çš„é£æ ¼å’Œç‰¹ç‚¹
- âœ… é›¶ç”¨æˆ·æ“ä½œï¼Œæ•°æ®å®¢è§‚ï¼ˆçœŸå®CTRï¼‰
- âœ… æ— éœ€æ–°è¡¨ï¼Œåˆ©ç”¨ç°æœ‰campaigns + creativesè¡¨

**å®ç°æ—¶é—´**ï¼š30åˆ†é’Ÿï¼ˆçº¯AI Promptä¼˜åŒ–ï¼‰

---

### é—®é¢˜4ï¼šå¦‚ä½•æŒç»­ä¼˜åŒ–ç­–ç•¥ï¼ˆå…³é”®è¯ã€æ–‡æ¡ˆã€é¢„ç®—ã€CTRã€CPCï¼‰ï¼Ÿ
**ç°çŠ¶**ï¼šæ‰€æœ‰ä¼˜åŒ–éœ€ç”¨æˆ·æ‰‹åŠ¨å‘èµ·ï¼Œç¼ºå°‘ç³»ç»Ÿæ€§æŒ‡å¯¼

**KISSè§£å†³æ–¹æ¡ˆ**ï¼š**æ¯å‘¨ä¼˜åŒ–æ¸…å•** + è§„åˆ™å¼•æ“
- âœ… æ¯å‘¨ä¸€è‡ªåŠ¨ç”Ÿæˆä¼˜åŒ–å»ºè®®ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
- âœ… è§„åˆ™åŒ–é€»è¾‘ï¼ˆæ— éœ€å¤æ‚ç®—æ³•ï¼‰
- âœ… ç”¨æˆ·æ‰‹åŠ¨ç¡®è®¤æ‰§è¡Œï¼ˆä¸è‡ªåŠ¨åŒ–ï¼‰
- âœ… è¿½è¸ªæ‰§è¡Œæ•ˆæœ

**å®ç°æ—¶é—´**ï¼š3å¤©ï¼ˆè§„åˆ™å¼•æ“ + å®šæ—¶ä»»åŠ¡ï¼‰

---

## ğŸ“ è¯¦ç»†è®¾è®¡

### é˜¶æ®µ1ï¼šCampaignå¯¹æ¯”è§†å›¾ï¼ˆ3å¤©ï¼‰

#### 1.1 åŠŸèƒ½æè¿°

**ç›®æ ‡**ï¼šè®©ç”¨æˆ·ä¸€çœ¼çœ‹å‡ºå“ªä¸ªå¹¿å‘Šå˜ä½“è¡¨ç°æœ€å¥½ï¼Œå¿«é€Ÿåšå‡ºä¼˜åŒ–å†³ç­–

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. åŒä¸€Offerçš„æ‰€æœ‰Campaignå¹¶æ’å±•ç¤º
2. å…³é”®æŒ‡æ ‡å¯¹æ¯”ï¼ˆCTRã€CPCã€èŠ±è´¹ã€è½¬åŒ–ã€ROIï¼‰
3. è‡ªåŠ¨æ ‡è¯†Winner
4. è§„åˆ™åŒ–ä¼˜åŒ–å»ºè®®
5. ä¸€é”®åº”ç”¨å»ºè®®

#### 1.2 UIè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Campaignå¯¹æ¯”åˆ†æ - Nikeè·‘é‹æ˜¥å­£ä¿ƒé”€                   [å…³é—­ Ã—]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æ•°æ®èŒƒå›´ï¼šè¿‘7å¤© (2025-01-10 ~ 2025-01-17)                  â”‚
â”‚ ğŸ“… æ•°æ®æ›´æ–°ï¼šä»Šå¤© 09:30 (æ¯æ—¥è‡ªåŠ¨åŒæ­¥)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å˜ä½“1-å“ç‰Œå¯¼å‘   â”‚  å˜ä½“2-åŠŸèƒ½å¯¼å‘   â”‚  å˜ä½“3-ä»·å€¼å¯¼å‘   â”‚
â”‚  ğŸ† Winner       â”‚                  â”‚                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çŠ¶æ€: âœ… Enabled â”‚  çŠ¶æ€: âœ… Enabled â”‚  çŠ¶æ€: âœ… Enabled â”‚
â”‚                  â”‚                  â”‚                  â”‚
â”‚  å±•ç¤º: 12,450    â”‚  å±•ç¤º: 10,230    â”‚  å±•ç¤º: 8,120     â”‚
â”‚  ç‚¹å‡»: 398       â”‚  ç‚¹å‡»: 286       â”‚  ç‚¹å‡»: 146       â”‚
â”‚  CTR: 3.2% ğŸŸ¢   â”‚  CTR: 2.8% ğŸŸ¡   â”‚  CTR: 1.8% ğŸ”´   â”‚
â”‚  (è¡Œä¸šå‡å€¼: 3.0%)â”‚  (è¡Œä¸šå‡å€¼: 3.0%)â”‚  (è¡Œä¸šå‡å€¼: 3.0%)â”‚
â”‚                  â”‚                  â”‚                  â”‚
â”‚  CPC: $1.20      â”‚  CPC: $1.35      â”‚  CPC: $1.65      â”‚
â”‚  èŠ±è´¹: $478      â”‚  èŠ±è´¹: $386      â”‚  èŠ±è´¹: $241      â”‚
â”‚  è½¬åŒ–: 42        â”‚  è½¬åŒ–: 31        â”‚  è½¬åŒ–: 12        â”‚
â”‚  CPA: $11.38     â”‚  CPA: $12.45     â”‚  CPA: $20.08     â”‚
â”‚  ROI: 240%       â”‚  ROI: 195%       â”‚  ROI: 110%       â”‚
â”‚                  â”‚                  â”‚                  â”‚
â”‚  [æŸ¥çœ‹è¯¦æƒ…]      â”‚  [æŸ¥çœ‹è¯¦æƒ…]      â”‚  [æŸ¥çœ‹è¯¦æƒ…]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ æ™ºèƒ½å»ºè®® (åŸºäºè¿‘7å¤©æ•°æ®)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ”´ é«˜ä¼˜å…ˆçº§å»ºè®®                                                â”‚
â”‚                                                                 â”‚
â”‚  1. æš‚åœè¡¨ç°ä¸ä½³çš„å˜ä½“                                          â”‚
â”‚     â€¢ å˜ä½“3-ä»·å€¼å¯¼å‘ï¼šCTR 1.8%ï¼Œä»…ä¸ºWinnerçš„56%                â”‚
â”‚     â€¢ åŸå› ï¼šCTRæ˜¾è‘—ä½äºè¡Œä¸šå¹³å‡å€¼ï¼ŒCPAé«˜å‡ºWinner 76%           â”‚
â”‚     â€¢ èŠ‚çœé¢„ç®—ï¼š$100/å¤© â†’ å¯é‡æ–°åˆ†é…ç»™è¡¨ç°æ›´å¥½çš„å˜ä½“           â”‚
â”‚     [ç«‹å³æš‚åœå˜ä½“3]                                             â”‚
â”‚                                                                 â”‚
â”‚  ğŸŸ¡ ä¸­ä¼˜å…ˆçº§å»ºè®®                                                â”‚
â”‚                                                                 â”‚
â”‚  2. å¢åŠ Winnerçš„é¢„ç®—                                            â”‚
â”‚     â€¢ å˜ä½“1-å“ç‰Œå¯¼å‘ï¼šCTR 3.2%ï¼ŒROI 240%ï¼Œè¡¨ç°ä¼˜å¼‚             â”‚
â”‚     â€¢ å»ºè®®ï¼šé¢„ç®— $100/å¤© â†’ $130/å¤© (+30%)                      â”‚
â”‚     â€¢ é¢„æœŸæ•ˆæœï¼š+30%å±•ç¤ºé‡ï¼Œ+25-30%è½¬åŒ–é‡                      â”‚
â”‚     [è°ƒæ•´é¢„ç®—]                                                  â”‚
â”‚                                                                 â”‚
â”‚  3. ä¼˜åŒ–å˜ä½“2çš„åˆ›æ„                                             â”‚
â”‚     â€¢ å˜ä½“2-åŠŸèƒ½å¯¼å‘ï¼šCTR 2.8%ï¼Œç•¥ä½äºè¡Œä¸šå‡å€¼                 â”‚
â”‚     â€¢ å»ºè®®ï¼šé‡æ–°ç”Ÿæˆåˆ›æ„ï¼Œå¼ºåŒ–USPå’ŒCTA                         â”‚
â”‚     [é‡æ–°ç”Ÿæˆåˆ›æ„]                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ˆ è¶‹åŠ¿å¯¹æ¯” (è¿‘7å¤©)                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [æŠ˜çº¿å›¾]                                                    â”‚ â”‚
â”‚ â”‚ è“çº¿ = å˜ä½“1 CTR (3.2%)                                     â”‚ â”‚
â”‚ â”‚ ç»¿çº¿ = å˜ä½“2 CTR (2.8%)                                     â”‚ â”‚
â”‚ â”‚ çº¢çº¿ = å˜ä½“3 CTR (1.8%)                                     â”‚ â”‚
â”‚ â”‚ ç°è‰²è™šçº¿ = è¡Œä¸šå‡å€¼ (3.0%)                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    [å¯¼å‡ºæ•°æ®]  [å…³é—­]
```

#### 1.3 Winnerè¯†åˆ«è§„åˆ™ï¼ˆå¢å¼ºç‰ˆ - å¤šç»´åº¦+ç½®ä¿¡åº¦ï¼‰

**ç‰ˆæœ¬å¯¹æ¯”**ï¼š

| ç»´åº¦ | åŸºç¡€ç‰ˆæœ¬ | å¢å¼ºç‰ˆæœ¬ï¼ˆV2ï¼‰ |
|------|---------|----------------|
| è¯„åˆ†ç»´åº¦ | CTR + ROI + CPA | **+æ ·æœ¬é‡ç½®ä¿¡åº¦+è¶‹åŠ¿ç¨³å®šæ€§** |
| æ ·æœ¬é‡è€ƒè™‘ | ä»…è¿‡æ»¤<1000 | **å¤šçº§ç½®ä¿¡åº¦è°ƒæ•´** |
| è¶‹åŠ¿åˆ†æ | âŒ æ—  | **âœ… 7å¤©è¶‹åŠ¿ç¨³å®šæ€§** |
| A/Bæµ‹è¯•å»ºè®® | âŒ æ—  | **âœ… Winnerä¸æ˜æ˜¾æ—¶å»ºè®®ç»§ç»­æµ‹è¯•** |
| å‡†ç¡®ç‡ | 75% | **85-90%** |

**å¢å¼ºç‰ˆç®—æ³•è®¾è®¡**ï¼š

```typescript
interface ScoredCampaign {
  campaign: Campaign;
  baseScore: number;
  finalScore: number;
  confidence: 'high' | 'medium' | 'low';
  trendScore: number;
  metadata: {
    confidenceMultiplier: number;
    stabilityBonus: number;
    sampleSize: number;
  };
}

function identifyWinner(campaigns: Campaign[]): ScoredCampaign | null {
  // è§„åˆ™1: è¿‡æ»¤æ‰å±•ç¤ºé‡å¤ªå°‘çš„Campaignï¼ˆ< 500æ¬¡ï¼‰
  const qualified = campaigns.filter(c => c.impressions >= 500);

  if (qualified.length === 0) {
    return null; // æ•°æ®ä¸è¶³ï¼Œä¸å¼ºåˆ¶é€‰æ‹©Winner
  }

  // è§„åˆ™2: è®¡ç®—å¢å¼ºè¯„åˆ†
  const scored: ScoredCampaign[] = qualified.map(c => {
    // 2.1 åŸºç¡€è¯„åˆ†ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼‰
    const baseScore = calculateBaseScore(c);

    // 2.2 æ ·æœ¬é‡ç½®ä¿¡åº¦è°ƒæ•´
    const confidenceMultiplier = calculateConfidenceMultiplier(c.impressions);
    const confidence = getConfidenceLevel(c.impressions);

    // 2.3 è¶‹åŠ¿ç¨³å®šæ€§è¯„åˆ†
    const trendScore = calculateTrendStability(c);
    const stabilityBonus = trendScore > 0.8 ? 5 : 0;

    // 2.4 ç»¼åˆè¯„åˆ†
    const finalScore = baseScore * confidenceMultiplier + stabilityBonus;

    return {
      campaign: c,
      baseScore,
      finalScore,
      confidence,
      trendScore,
      metadata: {
        confidenceMultiplier,
        stabilityBonus,
        sampleSize: c.impressions
      }
    };
  });

  // è§„åˆ™3: è¿”å›å¾—åˆ†æœ€é«˜çš„
  scored.sort((a, b) => b.finalScore - a.finalScore);
  return scored[0];
}

// åŸºç¡€è¯„åˆ†ï¼ˆä¿æŒç®€å•ï¼‰
function calculateBaseScore(c: Campaign): number {
  const ctrScore = (c.ctr / 0.03) * 40;  // CTRæƒé‡40%ï¼ŒåŸºå‡†3%
  const roiScore = (c.roi / 1.5) * 40;   // ROIæƒé‡40%ï¼ŒåŸºå‡†150%
  const cpaScore = c.cpa > 0 ? (1 / c.cpa) * 20 : 0;  // CPAæƒé‡20%

  return ctrScore + roiScore + cpaScore;
}

// æ ·æœ¬é‡ç½®ä¿¡åº¦è°ƒæ•´ï¼ˆç®€å•è§„åˆ™ï¼‰
function calculateConfidenceMultiplier(impressions: number): number {
  if (impressions < 1000) return 0.7;        // ä½ç½®ä¿¡åº¦
  if (impressions < 5000) return 0.85;       // ä¸­ç­‰ç½®ä¿¡åº¦
  if (impressions >= 10000) return 1.1;      // é«˜ç½®ä¿¡åº¦ï¼ˆé¢å¤–åŠ æˆï¼‰
  return 1.0;                                 // æ­£å¸¸ç½®ä¿¡åº¦
}

function getConfidenceLevel(impressions: number): 'high' | 'medium' | 'low' {
  if (impressions >= 5000) return 'high';
  if (impressions >= 1000) return 'medium';
  return 'low';
}

// è¶‹åŠ¿ç¨³å®šæ€§è¯„åˆ†ï¼ˆç®€å•æ ‡å‡†å·®è®¡ç®—ï¼‰
function calculateTrendStability(campaign: Campaign): number {
  // è·å–è¿‡å»7å¤©çš„æ¯æ—¥CTRæ•°æ®
  const dailyCTR = getLast7DaysCTR(campaign.id);

  if (dailyCTR.length < 5) {
    return 0.5; // æ•°æ®ä¸è¶³ï¼Œç»™ä¸­ç­‰åˆ†æ•°
  }

  // è®¡ç®—å˜å¼‚ç³»æ•°ï¼ˆCoefficient of Variationï¼‰
  const mean = dailyCTR.reduce((sum, ctr) => sum + ctr, 0) / dailyCTR.length;
  const variance = dailyCTR.reduce((sum, ctr) => sum + Math.pow(ctr - mean, 2), 0) / dailyCTR.length;
  const stdDev = Math.sqrt(variance);
  const cv = mean > 0 ? stdDev / mean : 1;

  // å˜å¼‚ç³»æ•°è¶Šå°ï¼Œç¨³å®šæ€§è¶Šé«˜
  // è¿”å›ç¨³å®šæ€§åˆ†æ•°ï¼ˆ0-1ä¹‹é—´ï¼Œ1ä¸ºæœ€ç¨³å®šï¼‰
  return Math.max(0, 1 - cv);
}

function getLast7DaysCTR(campaignId: number): number[] {
  const db = new Database(process.env.DATABASE_PATH!);
  const dailyData = db.prepare(`
    SELECT
      date,
      CASE
        WHEN impressions > 0
        THEN CAST(clicks AS REAL) / impressions
        ELSE 0
      END as daily_ctr
    FROM campaign_performance
    WHERE campaign_id = ?
      AND date >= date('now', '-7 days')
    ORDER BY date DESC
  `).all(campaignId) as any[];

  return dailyData.map(d => d.daily_ctr);
}
```

**A/Bæµ‹è¯•å»ºè®®é€»è¾‘**ï¼š

```typescript
interface TestRecommendation {
  type: 'continue_test' | 'declare_winner';
  reason: string;
  suggestion: string;
  winnerConfidence?: 'high' | 'medium' | 'low';
}

function evaluateWinnerStatus(
  winner: ScoredCampaign,
  secondPlace: ScoredCampaign
): TestRecommendation {
  const scoreDiff = winner.finalScore - secondPlace.finalScore;

  // è§„åˆ™1: Winnerä¼˜åŠ¿æ˜æ˜¾ï¼ˆå·®è·>15åˆ†ï¼‰
  if (scoreDiff > 15 && winner.confidence === 'high') {
    return {
      type: 'declare_winner',
      reason: `Winnerä¼˜åŠ¿æ˜¾è‘—ï¼ˆé¢†å…ˆ${scoreDiff.toFixed(1)}åˆ†ï¼‰ï¼Œç½®ä¿¡åº¦é«˜`,
      suggestion: `å¯ä»¥æš‚åœå…¶ä»–å˜ä½“ï¼Œé›†ä¸­é¢„ç®—åˆ°Winner`,
      winnerConfidence: 'high'
    };
  }

  // è§„åˆ™2: Winnerä¼˜åŠ¿ä¸æ˜æ˜¾ï¼ˆå·®è·<10åˆ†ï¼‰
  if (scoreDiff < 10) {
    return {
      type: 'continue_test',
      reason: `Winnerä¼˜åŠ¿ä¸æ˜æ˜¾ï¼ˆä»…é¢†å…ˆ${scoreDiff.toFixed(1)}åˆ†ï¼‰`,
      suggestion: `å»ºè®®ç»§ç»­æµ‹è¯•3-5å¤©ï¼Œæ ·æœ¬é‡è¾¾åˆ°10000+åå†åšå†³ç­–`
    };
  }

  // è§„åˆ™3: Winnerç½®ä¿¡åº¦ä½ï¼ˆæ ·æœ¬é‡ä¸è¶³ï¼‰
  if (winner.confidence === 'low') {
    return {
      type: 'continue_test',
      reason: `Winneræ ·æœ¬é‡ä¸è¶³ï¼ˆä»…${winner.metadata.sampleSize}å±•ç¤ºï¼‰ï¼Œç½®ä¿¡åº¦ä½`,
      suggestion: `å»ºè®®ç»§ç»­è¿è¡Œï¼Œæ ·æœ¬é‡è¾¾åˆ°5000+åå†åšå†³ç­–`
    };
  }

  // è§„åˆ™4: è¶‹åŠ¿ä¸ç¨³å®š
  if (winner.trendScore < 0.6) {
    return {
      type: 'continue_test',
      reason: `Winnerè¿‘7å¤©CTRæ³¢åŠ¨è¾ƒå¤§ï¼ˆç¨³å®šæ€§${(winner.trendScore * 100).toFixed(0)}%ï¼‰`,
      suggestion: `å»ºè®®è§‚å¯Ÿ1-2å‘¨ï¼Œç¡®è®¤ç¨³å®šè¶‹åŠ¿åå†åšå†³ç­–`
    };
  }

  // é»˜è®¤ï¼šä¸­ç­‰ç½®ä¿¡åº¦Winner
  return {
    type: 'declare_winner',
    reason: `Winnerè¡¨ç°è¾ƒå¥½ï¼ˆé¢†å…ˆ${scoreDiff.toFixed(1)}åˆ†ï¼‰ï¼Œç½®ä¿¡åº¦ä¸­ç­‰`,
    suggestion: `å¯ä»¥è€ƒè™‘æš‚åœå…¶ä»–å˜ä½“ï¼Œä½†éœ€æŒç»­ç›‘æ§æ€§èƒ½å˜åŒ–`,
    winnerConfidence: 'medium'
  };
}
```

#### 1.4 ä¼˜åŒ–å»ºè®®è§„åˆ™

**è§„åˆ™åŒ–å»ºè®®ç”Ÿæˆ**ï¼ˆif-elseé€»è¾‘ï¼‰ï¼š

```typescript
interface Recommendation {
  priority: 'high' | 'medium' | 'low';
  type: 'pause' | 'increase_budget' | 'decrease_budget' | 'regenerate_creative';
  campaign: Campaign;
  reason: string;
  action: string;
  expectedImpact: string;
}

function generateRecommendations(
  campaigns: Campaign[],
  winner: Campaign
): Recommendation[] {
  const recommendations: Recommendation[] = [];

  for (const campaign of campaigns) {
    if (campaign.id === winner.id) {
      // Winnerï¼šå»ºè®®å¢åŠ é¢„ç®—
      if (campaign.roi > 2.0 && campaign.budget < 200) {
        recommendations.push({
          priority: 'medium',
          type: 'increase_budget',
          campaign,
          reason: `ROI ${(campaign.roi * 100).toFixed(0)}%ï¼Œè¡¨ç°ä¼˜å¼‚`,
          action: `é¢„ç®— $${campaign.budget}/å¤© â†’ $${campaign.budget * 1.3}/å¤©`,
          expectedImpact: '+25-30%è½¬åŒ–é‡'
        });
      }
    } else {
      // éWinnerï¼šè¯„ä¼°æ˜¯å¦æš‚åœ
      if (campaign.ctr < winner.ctr * 0.5) {
        recommendations.push({
          priority: 'high',
          type: 'pause',
          campaign,
          reason: `CTR ${(campaign.ctr * 100).toFixed(1)}%ï¼Œä»…ä¸ºWinnerçš„${(campaign.ctr / winner.ctr * 100).toFixed(0)}%`,
          action: 'ç«‹å³æš‚åœæ­¤Campaign',
          expectedImpact: `èŠ‚çœé¢„ç®— $${campaign.budget}/å¤©`
        });
      } else if (campaign.ctr < 0.03) {
        // CTRä½äºè¡Œä¸šå‡å€¼3%
        recommendations.push({
          priority: 'medium',
          type: 'regenerate_creative',
          campaign,
          reason: `CTR ${(campaign.ctr * 100).toFixed(1)}%ï¼Œä½äºè¡Œä¸šå‡å€¼`,
          action: 'é‡æ–°ç”Ÿæˆåˆ›æ„ï¼Œå¼ºåŒ–USPå’ŒCTA',
          expectedImpact: 'é¢„æœŸCTRæå‡20-30%'
        });
      }
    }
  }

  // æŒ‰ä¼˜å…ˆçº§æ’åº
  const priorityOrder = { high: 0, medium: 1, low: 2 };
  recommendations.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);

  return recommendations;
}
```

#### 1.5 å‰ç«¯å®ç°

**å…¥å£**ï¼šOfferåˆ—è¡¨é¡µ â†’ Offerå¡ç‰‡ â†’ æ–°å¢æŒ‰é’®"ğŸ“Š å¯¹æ¯”åˆ†æ"

```typescript
// components/CampaignComparisonModal.tsx
'use client';

import { useState, useEffect } from 'react';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { Button } from '@/components/ui/button';
import { apiClient } from '@/lib/api/client';

interface Campaign {
  id: number;
  name: string;
  status: string;
  impressions: number;
  clicks: number;
  ctr: number;
  cpc: number;
  cost: number;
  conversions: number;
  cpa: number;
  roi: number;
}

export function CampaignComparisonModal({
  offerId,
  open,
  onClose
}: {
  offerId: number;
  open: boolean;
  onClose: () => void;
}) {
  const [campaigns, setCampaigns] = useState<Campaign[]>([]);
  const [winner, setWinner] = useState<Campaign | null>(null);
  const [recommendations, setRecommendations] = useState<Recommendation[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (open) {
      loadData();
    }
  }, [open, offerId]);

  const loadData = async () => {
    setLoading(true);
    try {
      const data = await apiClient.get<any>(`/api/offers/${offerId}/campaign-comparison`);
      setCampaigns(data.campaigns);
      setWinner(data.winner);
      setRecommendations(data.recommendations);
    } catch (error) {
      console.error('Failed to load comparison data:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleApplyRecommendation = async (rec: Recommendation) => {
    if (rec.type === 'pause') {
      if (confirm(`ç¡®å®šè¦æš‚åœ "${rec.campaign.name}" å—ï¼Ÿ`)) {
        await apiClient.post(`/api/campaigns/${rec.campaign.id}/pause`);
        loadData(); // åˆ·æ–°æ•°æ®
      }
    } else if (rec.type === 'increase_budget') {
      const newBudget = rec.campaign.budget * 1.3;
      if (confirm(`ç¡®å®šè¦å°†é¢„ç®—å¢åŠ åˆ° $${newBudget.toFixed(2)}/å¤© å—ï¼Ÿ`)) {
        await apiClient.put(`/api/campaigns/${rec.campaign.id}/budget`, { budget: newBudget });
        loadData();
      }
    }
    // ... å…¶ä»–æ“ä½œç±»å‹
  };

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent className="max-w-6xl max-h-[90vh] overflow-y-auto">
        <DialogHeader>
          <DialogTitle>Campaignå¯¹æ¯”åˆ†æ</DialogTitle>
        </DialogHeader>

        {loading ? (
          <div className="text-center py-8">åŠ è½½ä¸­...</div>
        ) : (
          <>
            {/* å¹¶æ’å¯¹æ¯”è§†å›¾ */}
            <div className="grid grid-cols-3 gap-4">
              {campaigns.map(campaign => (
                <CampaignCard
                  key={campaign.id}
                  campaign={campaign}
                  isWinner={campaign.id === winner?.id}
                />
              ))}
            </div>

            {/* ä¼˜åŒ–å»ºè®® */}
            <div className="mt-6">
              <h3 className="text-lg font-semibold mb-4">ğŸ’¡ æ™ºèƒ½å»ºè®®</h3>
              {recommendations.map((rec, idx) => (
                <RecommendationCard
                  key={idx}
                  recommendation={rec}
                  onApply={() => handleApplyRecommendation(rec)}
                />
              ))}
            </div>
          </>
        )}
      </DialogContent>
    </Dialog>
  );
}
```

#### 1.6 åç«¯API

**GET /api/offers/:id/campaign-comparison**

```typescript
// app/api/offers/[id]/campaign-comparison/route.ts
import { NextRequest, NextResponse } from 'next/server';
import Database from 'better-sqlite3';
import { requireAuth, AuthenticatedRequest } from '@/lib/auth/middleware';

const db = new Database(process.env.DATABASE_PATH!);

export async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  const authError = await requireAuth(request);
  if (authError) return authError;

  const user = (request as AuthenticatedRequest).user!;
  const offerId = parseInt(params.id);

  // 1. éªŒè¯Offerå½’å±
  const offer = db.prepare('SELECT id FROM offers WHERE id = ? AND user_id = ?')
    .get(offerId, user.userId);

  if (!offer) {
    return NextResponse.json({ error: 'Offer not found' }, { status: 404 });
  }

  // 2. æŸ¥è¯¢æ‰€æœ‰å…³è”çš„CampaignåŠå…¶æ€§èƒ½æ•°æ®
  const campaigns = db.prepare(`
    SELECT
      c.id,
      c.campaign_name as name,
      c.status,
      COALESCE(SUM(p.impressions), 0) as impressions,
      COALESCE(SUM(p.clicks), 0) as clicks,
      CASE
        WHEN SUM(p.impressions) > 0
        THEN CAST(SUM(p.clicks) AS REAL) / SUM(p.impressions)
        ELSE 0
      END as ctr,
      CASE
        WHEN SUM(p.clicks) > 0
        THEN CAST(SUM(p.cost) AS REAL) / SUM(p.clicks)
        ELSE 0
      END as cpc,
      COALESCE(SUM(p.cost), 0) as cost,
      COALESCE(SUM(p.conversions), 0) as conversions,
      CASE
        WHEN SUM(p.conversions) > 0
        THEN CAST(SUM(p.cost) AS REAL) / SUM(p.conversions)
        ELSE 0
      END as cpa,
      CASE
        WHEN SUM(p.cost) > 0
        THEN (SUM(p.conversion_value) - SUM(p.cost)) / SUM(p.cost)
        ELSE 0
      END as roi
    FROM campaigns c
    LEFT JOIN campaign_performance p ON c.campaign_id = p.campaign_id
      AND p.date >= date('now', '-7 days')
    WHERE c.offer_id = ?
    GROUP BY c.id, c.campaign_name, c.status
    ORDER BY c.created_at ASC
  `).all(offerId);

  // 3. è¯†åˆ«Winner
  const winner = identifyWinner(campaigns);

  // 4. ç”Ÿæˆä¼˜åŒ–å»ºè®®
  const recommendations = generateRecommendations(campaigns, winner);

  return NextResponse.json({
    campaigns,
    winner,
    recommendations,
    dateRange: {
      start: getDateString(-7),
      end: getDateString(0)
    }
  });
}

function identifyWinner(campaigns: any[]): any {
  const qualified = campaigns.filter(c => c.impressions >= 1000);
  if (qualified.length === 0) return campaigns[0];

  const scored = qualified.map(c => ({
    ...c,
    score: (c.ctr / 0.03) * 40 + (c.roi / 1.5) * 40 + (1 / c.cpa) * 20
  }));

  scored.sort((a, b) => b.score - a.score);
  return scored[0];
}

function generateRecommendations(campaigns: any[], winner: any): any[] {
  // ï¼ˆå®ç°åŒå‰ç«¯é€»è¾‘ï¼‰
  const recommendations = [];

  for (const campaign of campaigns) {
    if (campaign.id === winner.id) {
      if (campaign.roi > 2.0 && campaign.budget < 200) {
        recommendations.push({
          priority: 'medium',
          type: 'increase_budget',
          campaign,
          reason: `ROI ${(campaign.roi * 100).toFixed(0)}%ï¼Œè¡¨ç°ä¼˜å¼‚`,
          action: `é¢„ç®—å¢åŠ 30%`,
          expectedImpact: '+25-30%è½¬åŒ–é‡'
        });
      }
    } else {
      if (campaign.ctr < winner.ctr * 0.5) {
        recommendations.push({
          priority: 'high',
          type: 'pause',
          campaign,
          reason: `CTR ${(campaign.ctr * 100).toFixed(1)}%ï¼Œä»…ä¸ºWinnerçš„${(campaign.ctr / winner.ctr * 100).toFixed(0)}%`,
          action: 'ç«‹å³æš‚åœæ­¤Campaign',
          expectedImpact: `èŠ‚çœé¢„ç®— $${campaign.budget}/å¤©`
        });
      }
    }
  }

  return recommendations;
}

function getDateString(daysOffset: number): string {
  const date = new Date();
  date.setDate(date.getDate() + daysOffset);
  return date.toISOString().split('T')[0];
}
```

---

### é˜¶æ®µ2ï¼šAIè‡ªåŠ¨å­¦ä¹ å†å²åˆ›æ„ï¼ˆ30åˆ†é’Ÿï¼‰

#### 2.1 åŠŸèƒ½æè¿°

**ç›®æ ‡**ï¼šAIè‡ªåŠ¨ä»å†å²é«˜CTRåˆ›æ„ä¸­å­¦ä¹ ï¼Œç”Ÿæˆæ›´ä¼˜è´¨çš„æ–°åˆ›æ„

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- âœ… **é›¶ç”¨æˆ·æ“ä½œ**ï¼šæ— éœ€äººå·¥æ ‡æ³¨ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–
- âœ… **æ•°æ®å®¢è§‚**ï¼šåŸºäºçœŸå®CTRï¼Œä¸æ˜¯ä¸»è§‚åˆ¤æ–­
- âœ… **æ— éœ€æ–°è¡¨**ï¼šåˆ©ç”¨ç°æœ‰campaigns + creativesè¡¨
- âœ… **å®ç°ç®€å•**ï¼šä»…éœ€ä¼˜åŒ–AI Prompt

#### 2.2 æŠ€æœ¯å®ç°

**æ ¸å¿ƒé€»è¾‘**ï¼šæŸ¥è¯¢é«˜CTRåˆ›æ„ â†’ æ³¨å…¥AI Prompt â†’ è‡ªåŠ¨ä¼˜åŒ–

**æ­¥éª¤1ï¼šæŸ¥è¯¢ç”¨æˆ·å†å²é«˜CTRåˆ›æ„**

```typescript
// lib/ai/creativeOptimization.ts

interface TopCreative {
  creative_data: string;  // JSON string from creatives table
  ctr: number;
  headline: string;
  description: string;
}

export function getTopPerformingCreatives(userId: number): TopCreative[] {
  const db = new Database(process.env.DATABASE_PATH!);

  // æŸ¥è¯¢è¯¥ç”¨æˆ·CTR > 3%çš„åˆ›æ„ï¼ˆå–å‰10ä¸ªï¼‰
  const topCreatives = db.prepare(`
    SELECT
      c.creative_data,
      camp.ctr,
      camp.headline,
      camp.description
    FROM creatives c
    JOIN campaigns camp ON c.campaign_id = camp.campaign_id
    WHERE c.user_id = ?
      AND camp.ctr > 0.03
      AND camp.impressions >= 100
    ORDER BY camp.ctr DESC
    LIMIT 10
  `).all(userId) as TopCreative[];

  return topCreatives;
}
```

**æ­¥éª¤2ï¼šæŸ¥è¯¢ä½CTRåˆ›æ„ï¼ˆè´Ÿé¢æ¡ˆä¾‹ï¼‰**

```typescript
// lib/ai/creativeOptimization.ts

export function getLowPerformingCreatives(userId: number): TopCreative[] {
  const db = new Database(process.env.DATABASE_PATH!);

  // æŸ¥è¯¢è¯¥ç”¨æˆ·CTR < 1.5%çš„åˆ›æ„ï¼ˆå–å10ä¸ªï¼‰
  const lowCreatives = db.prepare(`
    SELECT
      c.creative_data,
      camp.ctr,
      camp.headline,
      camp.description
    FROM creatives c
    JOIN campaigns camp ON c.campaign_id = camp.campaign_id
    WHERE c.user_id = ?
      AND camp.ctr < 0.015
      AND camp.impressions >= 100
    ORDER BY camp.ctr ASC
    LIMIT 10
  `).all(userId) as TopCreative[];

  return lowCreatives;
}
```

**æ­¥éª¤3ï¼šæˆåŠŸæ¡ˆä¾‹ç‰¹å¾æå–ï¼ˆç®€å•ç»Ÿè®¡ï¼‰**

```typescript
// lib/ai/creativeOptimization.ts

interface CreativePatterns {
  avgHeadlineLength: number;
  brandMentionRate: number;      // å“ç‰Œåå‡ºç°æ¯”ä¾‹
  priceInfoRate: number;          // ä»·æ ¼/ä¿ƒé”€ä¿¡æ¯æ¯”ä¾‹
  numberUsageRate: number;        // æ•°å­—ä½¿ç”¨æ¯”ä¾‹
  emotionWords: string[];         // é«˜é¢‘æƒ…æ„Ÿè¯
  commonPhrases: string[];        // å¸¸è§çŸ­è¯­
}

export function extractSuccessPatterns(creatives: TopCreative[]): CreativePatterns {
  if (creatives.length === 0) {
    return getDefaultPatterns();
  }

  // 1. æ ‡é¢˜å¹³å‡é•¿åº¦
  const avgHeadlineLength =
    creatives.reduce((sum, c) => sum + c.headline.length, 0) / creatives.length;

  // 2. å“ç‰Œåå‡ºç°ç‡ï¼ˆç®€å•æ£€æµ‹å¸¸è§å“ç‰Œå…³é”®è¯ï¼‰
  const brandKeywords = ['Nike', 'Adidas', 'è€å…‹', 'é˜¿è¿ª', 'å“ç‰Œ'];
  const brandMentions = creatives.filter(c =>
    brandKeywords.some(keyword => c.headline.includes(keyword))
  ).length;
  const brandMentionRate = brandMentions / creatives.length;

  // 3. ä»·æ ¼ä¿¡æ¯æ¯”ä¾‹
  const pricePattern = /æŠ˜|ä¿ƒé”€|ä¼˜æƒ |ä»·æ ¼|\d+å…ƒ|ç‰¹æƒ |å‡\d+/;
  const priceInfoCount = creatives.filter(c =>
    pricePattern.test(c.headline) || pricePattern.test(c.description)
  ).length;
  const priceInfoRate = priceInfoCount / creatives.length;

  // 4. æ•°å­—ä½¿ç”¨æ¯”ä¾‹
  const numberPattern = /\d+/;
  const numberUsageCount = creatives.filter(c =>
    numberPattern.test(c.headline)
  ).length;
  const numberUsageRate = numberUsageCount / creatives.length;

  // 5. æå–é«˜é¢‘æƒ…æ„Ÿè¯ï¼ˆç®€å•è¯é¢‘ç»Ÿè®¡ï¼‰
  const emotionKeywords = ['ä¸“ä¸š', 'è½»ä¾¿', 'èˆ’é€‚', 'é€æ°”', 'é«˜ç«¯', 'ç»å…¸', 'æ—¶å°š'];
  const emotionCounts: Record<string, number> = {};

  for (const c of creatives) {
    for (const word of emotionKeywords) {
      if (c.headline.includes(word) || c.description.includes(word)) {
        emotionCounts[word] = (emotionCounts[word] || 0) + 1;
      }
    }
  }

  const topEmotionWords = Object.entries(emotionCounts)
    .filter(([_, count]) => count >= 3)  // è‡³å°‘å‡ºç°3æ¬¡
    .map(([word]) => word)
    .slice(0, 5);

  return {
    avgHeadlineLength: Math.round(avgHeadlineLength),
    brandMentionRate,
    priceInfoRate,
    numberUsageRate,
    emotionWords: topEmotionWords,
    commonPhrases: []  // å¯æ‰©å±•
  };
}
```

**æ­¥éª¤4ï¼šå¤±è´¥æ¡ˆä¾‹æ¨¡å¼è¯†åˆ«**

```typescript
// lib/ai/creativeOptimization.ts

export function extractFailurePatterns(creatives: TopCreative[]): string[] {
  if (creatives.length === 0) return [];

  const patterns: string[] = [];

  // 1. æ ‡é¢˜è¿‡é•¿ï¼ˆ> 30å­—ï¼‰
  const longHeadlines = creatives.filter(c => c.headline.length > 30);
  if (longHeadlines.length >= 3) {
    patterns.push('æ ‡é¢˜è¿‡é•¿ï¼ˆ> 30å­—ï¼‰ï¼Œå»ºè®®æ§åˆ¶åœ¨15-25å­—');
  }

  // 2. ç¼ºå°‘å“ç‰Œå
  const brandKeywords = ['Nike', 'Adidas', 'è€å…‹', 'é˜¿è¿ª', 'å“ç‰Œ'];
  const noBrandCount = creatives.filter(c =>
    !brandKeywords.some(keyword => c.headline.includes(keyword))
  ).length;
  if (noBrandCount >= 5) {
    patterns.push('ç¼ºå°‘å“ç‰Œåç§°ï¼Œå“ç‰Œè¯†åˆ«åº¦ä½');
  }

  // 3. ç¼ºå°‘å·å¬æ€§ç”¨è¯­ï¼ˆCTAï¼‰
  const ctaKeywords = ['ç«‹å³', 'é©¬ä¸Š', 'è´­ä¹°', 'æŠ¢è´­', 'é¢†å–', 'æŸ¥çœ‹'];
  const noCtaCount = creatives.filter(c =>
    !ctaKeywords.some(keyword => c.description.includes(keyword))
  ).length;
  if (noCtaCount >= 5) {
    patterns.push('ç¼ºå°‘å·å¬æ€§ç”¨è¯­ï¼ˆCTAï¼‰ï¼Œå¦‚"ç«‹å³è´­ä¹°"ã€"é©¬ä¸Šé¢†å–"');
  }

  // 4. ä¿¡æ¯è¿‡äºæ¨¡ç³Š
  const vagueKeywords = ['ä¼˜è´¨', 'å¥½ç”¨', 'ä¸é”™', 'å¯ä»¥'];
  const vagueCount = creatives.filter(c =>
    vagueKeywords.some(keyword => c.headline.includes(keyword))
  ).length;
  if (vagueCount >= 3) {
    patterns.push('ä½¿ç”¨æ¨¡ç³Šæè¿°è¯ï¼ˆ"ä¼˜è´¨"ã€"å¥½ç”¨"ï¼‰ï¼Œå»ºè®®ç”¨å…·ä½“åŠŸèƒ½ç‰¹ç‚¹');
  }

  return patterns;
}
```

**æ­¥éª¤5ï¼šå¢å¼ºAI Promptç”Ÿæˆ**

```typescript
// lib/ai/creativeGenerator.ts

export async function generateCreatives(
  offerData: any,
  userId: number
): Promise<Creative> {
  // 1. è·å–ç”¨æˆ·å†å²é«˜CTRå’Œä½CTRåˆ›æ„
  const topCreatives = getTopPerformingCreatives(userId);
  const lowCreatives = getLowPerformingCreatives(userId);

  // 2. æå–æˆåŠŸæ¡ˆä¾‹ç‰¹å¾
  const successPatterns = extractSuccessPatterns(topCreatives);

  // 3. æå–å¤±è´¥æ¡ˆä¾‹æ¨¡å¼
  const failurePatterns = extractFailurePatterns(lowCreatives);

  // 4. æ„å»ºå¢å¼ºç‰ˆAI prompt
  let enhancedPrompt = '';

  if (topCreatives.length > 0) {
    enhancedPrompt = `
## ğŸ“Š ç”¨æˆ·å†å²æ•°æ®åˆ†æï¼ˆåŸºäº ${topCreatives.length + lowCreatives.length} æ¡å†å²åˆ›æ„ï¼‰

### âœ… æˆåŠŸæ¡ˆä¾‹ï¼ˆCTR > 3%çš„ ${topCreatives.length} ä¸ªæ¡ˆä¾‹ï¼‰ï¼š

${topCreatives.map((c, i) => `
${i + 1}. CTR: ${(c.ctr * 100).toFixed(2)}%
   æ ‡é¢˜: ${c.headline}
   æè¿°: ${c.description}
`).join('\n')}

### ğŸ“ˆ æˆåŠŸç‰¹å¾ç»Ÿè®¡åˆ†æï¼š

- **æ ‡é¢˜é•¿åº¦**ï¼šå¹³å‡ ${successPatterns.avgHeadlineLength} å­—ï¼ˆå»ºè®®èŒƒå›´ï¼š15-25å­—ï¼‰
- **å“ç‰Œçªå‡º**ï¼š${(successPatterns.brandMentionRate * 100).toFixed(0)}% çš„æˆåŠŸæ¡ˆä¾‹åŒ…å«å“ç‰Œå
- **ä»·æ ¼ä¿¡æ¯**ï¼š${(successPatterns.priceInfoRate * 100).toFixed(0)}% æåˆ°ä¿ƒé”€/ä»·æ ¼ä¿¡æ¯
- **æ•°å­—ä½¿ç”¨**ï¼š${(successPatterns.numberUsageRate * 100).toFixed(0)}% ä½¿ç”¨å…·ä½“æ•°å­—
- **é«˜é¢‘æƒ…æ„Ÿè¯**ï¼š${successPatterns.emotionWords.join('ã€') || 'æ— '}

### âŒ éœ€è¦é¿å…çš„å¤±è´¥æ¨¡å¼ï¼ˆCTR < 1.5%çš„åé¢æ•™æï¼‰ï¼š

${lowCreatives.slice(0, 3).map((c, i) => `
${i + 1}. CTR: ${(c.ctr * 100).toFixed(2)}% (ä½æ•ˆ)
   æ ‡é¢˜: ${c.headline}
   é—®é¢˜: å¯èƒ½å­˜åœ¨${failurePatterns[i] || 'æ•ˆæœä¸ä½³'}
`).join('\n')}

**å¸¸è§å¤±è´¥åŸå› **ï¼š
${failurePatterns.map(p => `- ${p}`).join('\n')}

### ğŸ¯ ç”Ÿæˆç­–ç•¥ï¼ˆåŸºäºæ•°æ®æ´å¯Ÿï¼‰ï¼š

1. **æ ‡é¢˜é•¿åº¦**ï¼šæ§åˆ¶åœ¨ ${Math.max(15, successPatterns.avgHeadlineLength - 3)}-${Math.min(25, successPatterns.avgHeadlineLength + 3)} å­—
2. **å“ç‰Œå¼ºåŒ–**ï¼š${successPatterns.brandMentionRate > 0.6 ? 'åŠ¡å¿…' : 'å»ºè®®'}åŒ…å«å“ç‰Œåç§°
3. **ä»·æ ¼ä¿¡æ¯**ï¼š${successPatterns.priceInfoRate > 0.4 ? 'å»ºè®®æ·»åŠ ' : 'å¯é€‰'}ä¿ƒé”€/ä¼˜æƒ ä¿¡æ¯
4. **æƒ…æ„Ÿå…±é¸£**ï¼šå¤šä½¿ç”¨é«˜é¢‘æˆåŠŸè¯æ±‡ï¼š${successPatterns.emotionWords.join('ã€')}
5. **é¿å…é›·åŒº**ï¼š${failurePatterns.length > 0 ? 'ä¸è¦' + failurePatterns[0] : 'ä¿æŒç®€æ´æ˜ç¡®'}

---
`;
  }

  // 5. è°ƒç”¨AI API
  const prompt = `
${BASE_CREATIVE_PROMPT}

${enhancedPrompt}

## äº§å“ä¿¡æ¯ï¼š
${JSON.stringify(offerData, null, 2)}

è¯·ä¸¥æ ¼å‚è€ƒä¸Šè¿°æˆåŠŸæ¨¡å¼å’Œç»Ÿè®¡ç‰¹å¾ï¼Œé¿å…å¤±è´¥æ¨¡å¼ï¼Œç”Ÿæˆ5ç»„å¹¿å‘Šåˆ›æ„ã€‚
æ¯ç»„åˆ›æ„å¿…é¡»åŒ…å«ï¼šæ ‡é¢˜ï¼ˆ${successPatterns.avgHeadlineLength}å­—å·¦å³ï¼‰ã€æè¿°ï¼ˆ60å­—å†…ï¼‰ã€å±•ç¤ºé“¾æ¥ã€‚
`;

  const response = await callAIAPI(prompt);
  return parseCreativeResponse(response);
}
```

**ä¼˜åŠ¿å¯¹æ¯”**ï¼š

| ç»´åº¦ | åŸºç¡€ç‰ˆæœ¬ | å¢å¼ºç‰ˆæœ¬ï¼ˆV2ï¼‰ |
|------|---------|----------------|
| æˆåŠŸæ¡ˆä¾‹ | åˆ—å‡º10ä¸ª | **10ä¸ª+ç‰¹å¾æå–** |
| å¤±è´¥å­¦ä¹  | âŒ æ—  | **âœ… 10ä¸ªè´Ÿé¢æ¡ˆä¾‹** |
| ç‰¹å¾åˆ†æ | âŒ æ‰‹åŠ¨è§‚å¯Ÿ | **âœ… è‡ªåŠ¨ç»Ÿè®¡åˆ†æ** |
| Promptè´¨é‡ | é€šç”¨å»ºè®® | **ä¸ªæ€§åŒ–æ•°æ®é©±åŠ¨** |
| AIç”ŸæˆCTR | æå‡10% | **æå‡15-20%** |
| å®ç°å¤æ‚åº¦ | ç®€å• | **ä»ç„¶ç®€å•ï¼ˆç»Ÿè®¡ï¼‰** |
| å®æ–½æ—¶é—´ | 30åˆ†é’Ÿ | **2å°æ—¶** |

**é¢„æœŸæ•ˆæœæå‡**ï¼š
- âœ… AIåˆ›æ„CTRï¼š10% â†’ **15-20%**ï¼ˆé€šè¿‡ç‰¹å¾å­¦ä¹ å’Œé¿å…å¤±è´¥æ¨¡å¼ï¼‰
- âœ… åˆ›æ„ç›¸å…³æ€§ï¼šæå‡30%ï¼ˆåŸºäºä¸ªæ€§åŒ–ç‰¹å¾ï¼‰
- âœ… å“ç‰Œä¸€è‡´æ€§ï¼šæå‡40%ï¼ˆå­¦ä¹ ç”¨æˆ·å“ç‰Œé£æ ¼ï¼‰

---

### é˜¶æ®µ3ï¼šæ¯å‘¨ä¼˜åŒ–æ¸…å•ï¼ˆ3å¤©ï¼‰

#### 3.1 åŠŸèƒ½æè¿°

**ç›®æ ‡**ï¼šç³»ç»Ÿæ¯å‘¨è‡ªåŠ¨åˆ†ææ‰€æœ‰Campaignï¼Œç”Ÿæˆä¼˜å…ˆçº§æ’åºçš„ä¼˜åŒ–å»ºè®®æ¸…å•

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. æ¯å‘¨ä¸€å‡Œæ™¨è‡ªåŠ¨è¿è¡Œåˆ†æ
2. è§„åˆ™åŒ–ç”Ÿæˆä¼˜åŒ–å»ºè®®
3. Dashboardæ˜¾ç¤º"å¾…å¤„ç†å»ºè®®"æ•°é‡
4. ç”¨æˆ·å¯ä¸€é”®åº”ç”¨æˆ–å¿½ç•¥å»ºè®®
5. è¿½è¸ªå»ºè®®æ‰§è¡Œæ•ˆæœ

#### 3.2 UIè®¾è®¡

**Dashboardæ–°å¢å¡ç‰‡**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard                                       [@User Avatar â–¼]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ æœ¬å‘¨ä¼˜åŒ–å»ºè®® (5é¡¹å¾…å¤„ç†)                        [æŸ¥çœ‹å…¨éƒ¨â†’]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ”´ é«˜ä¼˜å…ˆçº§ (2é¡¹)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 1. æš‚åœCampaign "Nikeè·‘é‹-ä»·å€¼å¯¼å‘"                        â”‚â”‚
â”‚  â”‚    åŸå› ï¼šCTR 1.2%ï¼Œä½äºå¹³å‡å€¼60%ï¼Œè¿ç»­7å¤©è¡¨ç°ä¸ä½³          â”‚â”‚
â”‚  â”‚    é¢„æœŸèŠ‚çœï¼š$700/å‘¨                                        â”‚â”‚
â”‚  â”‚    [ç«‹å³æš‚åœ]  [å¿½ç•¥]                             2025-01-15â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ 2. å¢åŠ Campaign "Nikeè·‘é‹-å“ç‰Œå¯¼å‘" é¢„ç®—                   â”‚â”‚
â”‚  â”‚    åŸå› ï¼šCTR 4.2%ï¼ŒROI 280%ï¼Œè¿ç»­7å¤©è¡¨ç°ä¼˜å¼‚                â”‚â”‚
â”‚  â”‚    å»ºè®®ï¼š$100/å¤© â†’ $140/å¤© (+40%)                          â”‚â”‚
â”‚  â”‚    é¢„æœŸå¢åŠ ï¼š+35%è½¬åŒ–é‡                                     â”‚â”‚
â”‚  â”‚    [è°ƒæ•´é¢„ç®—]  [å¿½ç•¥]                             2025-01-15â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (3é¡¹)                                [å±•å¼€æŸ¥çœ‹ â–¼] â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŒ–å»ºè®®è¯¦æƒ…é¡µ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœ¬å‘¨ä¼˜åŒ–å»ºè®® (2025-01-15 ç”Ÿæˆ)                        [å…³é—­ Ã—]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æ•°æ®åˆ†æå‘¨æœŸï¼š2025-01-08 ~ 2025-01-14 (7å¤©)                â”‚
â”‚ ğŸ¯ åˆ†æèŒƒå›´ï¼šæ‰€æœ‰æ´»è·ƒçš„Campaign (å…±12ä¸ª)                       â”‚
â”‚ ğŸ’¡ ç”Ÿæˆæ—¶é—´ï¼š2025-01-15 00:30                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ é«˜ä¼˜å…ˆçº§å»ºè®® (2é¡¹)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. æš‚åœä½æ•ˆCampaign                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Campaign: Nikeè·‘é‹-ä»·å€¼å¯¼å‘                                â”‚â”‚
â”‚  â”‚ Offer: Nikeè·‘é‹æ˜¥å­£ä¿ƒé”€                                    â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ ğŸ“‰ æ€§èƒ½æ•°æ®ï¼ˆè¿‘7å¤©ï¼‰ï¼š                                      â”‚â”‚
â”‚  â”‚ â€¢ CTR: 1.2% (è¡Œä¸šå‡å€¼: 3.0%)                               â”‚â”‚
â”‚  â”‚ â€¢ CPC: $1.85 (é«˜äºåŒOfferå…¶ä»–å˜ä½“)                         â”‚â”‚
â”‚  â”‚ â€¢ èŠ±è´¹: $680                                               â”‚â”‚
â”‚  â”‚ â€¢ è½¬åŒ–: 8                                                  â”‚â”‚
â”‚  â”‚ â€¢ CPA: $85 (ç›®æ ‡: $15)                                     â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ ğŸ¯ é—®é¢˜åˆ†æï¼š                                               â”‚â”‚
â”‚  â”‚ â€¢ CTRä»…ä¸ºè¡Œä¸šå‡å€¼çš„40%                                     â”‚â”‚
â”‚  â”‚ â€¢ CPAè¿œé«˜äºç›®æ ‡ï¼ŒROIä¸ºè´Ÿ                                   â”‚â”‚
â”‚  â”‚ â€¢ åŒOfferçš„å…¶ä»–2ä¸ªå˜ä½“CTRå‡>2.8%                           â”‚â”‚
â”‚  â”‚ â€¢ è¿ç»­7å¤©è¡¨ç°ä¸ä½³ï¼Œæ— æ”¹å–„è¶‹åŠ¿                              â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ âœ… å»ºè®®æ“ä½œï¼š                                               â”‚â”‚
â”‚  â”‚ ç«‹å³æš‚åœæ­¤Campaignï¼Œé¢„ç®—é‡æ–°åˆ†é…ç»™è¡¨ç°æ›´å¥½çš„å˜ä½“           â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š                                               â”‚â”‚
â”‚  â”‚ â€¢ èŠ‚çœé¢„ç®—ï¼š$100/å¤©                                        â”‚â”‚
â”‚  â”‚ â€¢ å¯é‡æ–°åˆ†é…ç»™ROI>200%çš„Campaign                           â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ [ç«‹å³æš‚åœ]  [æŸ¥çœ‹Campaignè¯¦æƒ…]  [å¿½ç•¥æ­¤å»ºè®®]              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  2. æ‰©å¤§é«˜æ•ˆCampaigné¢„ç®—                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Campaign: Nikeè·‘é‹-å“ç‰Œå¯¼å‘                                â”‚â”‚
â”‚  â”‚ Offer: Nikeè·‘é‹æ˜¥å­£ä¿ƒé”€                                    â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ ğŸ“ˆ æ€§èƒ½æ•°æ®ï¼ˆè¿‘7å¤©ï¼‰ï¼š                                      â”‚â”‚
â”‚  â”‚ â€¢ CTR: 4.2% (è¡Œä¸šå‡å€¼: 3.0%)                               â”‚â”‚
â”‚  â”‚ â€¢ CPC: $1.15                                               â”‚â”‚
â”‚  â”‚ â€¢ èŠ±è´¹: $672                                               â”‚â”‚
â”‚  â”‚ â€¢ è½¬åŒ–: 58                                                 â”‚â”‚
â”‚  â”‚ â€¢ CPA: $11.6 (ç›®æ ‡: $15)                                   â”‚â”‚
â”‚  â”‚ â€¢ ROI: 280%                                                â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ ğŸ¯ æœºä¼šåˆ†æï¼š                                               â”‚â”‚
â”‚  â”‚ â€¢ CTRé«˜äºè¡Œä¸šå‡å€¼40%                                       â”‚â”‚
â”‚  â”‚ â€¢ CPAä½äºç›®æ ‡ï¼ŒROIæ˜¾è‘—ä¸ºæ­£                                 â”‚â”‚
â”‚  â”‚ â€¢ é¢„ç®—å—é™å¯¼è‡´å±•ç¤ºé‡å—é™ï¼ˆå±•ç¤ºä»½é¢65%ï¼‰                    â”‚â”‚
â”‚  â”‚ â€¢ è¿ç»­7å¤©ç¨³å®šè¡¨ç°ä¼˜å¼‚                                      â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ âœ… å»ºè®®æ“ä½œï¼š                                               â”‚â”‚
â”‚  â”‚ å¢åŠ æ¯æ—¥é¢„ç®—40%ï¼Œä»$100/å¤©æå‡è‡³$140/å¤©                    â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š                                               â”‚â”‚
â”‚  â”‚ â€¢ å±•ç¤ºä»½é¢æå‡ï¼š65% â†’ 85%                                  â”‚â”‚
â”‚  â”‚ â€¢ è½¬åŒ–é‡æå‡ï¼š+35% (çº¦20ä¸ªé¢å¤–è½¬åŒ–/å‘¨)                     â”‚â”‚
â”‚  â”‚ â€¢ ä¿æŒROIåœ¨250%+æ°´å¹³                                       â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ [è°ƒæ•´é¢„ç®—]  [æŸ¥çœ‹Campaignè¯¦æƒ…]  [å¿½ç•¥æ­¤å»ºè®®]              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¡ ä¸­ä¼˜å…ˆçº§å»ºè®® (3é¡¹)                               [å±•å¼€ â–¼]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ ä½ä¼˜å…ˆçº§å»ºè®® (0é¡¹)                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    [å…¨éƒ¨åº”ç”¨]  [å¯¼å‡ºå»ºè®®]  [å…³é—­]
```

#### 3.3 å®šæ—¶ä»»åŠ¡å®ç°

**ä½¿ç”¨node-cronæ¯å‘¨ä¸€å‡Œæ™¨æ‰§è¡Œ**ï¼š

```typescript
// lib/cron/weeklyOptimization.ts
import cron from 'node-cron';
import Database from 'better-sqlite3';

const db = new Database(process.env.DATABASE_PATH!);

// æ¯å‘¨ä¸€å‡Œæ™¨00:30æ‰§è¡Œ
cron.schedule('30 0 * * 1', () => {
  console.log('ğŸ”„ å¼€å§‹ç”Ÿæˆæ¯å‘¨ä¼˜åŒ–å»ºè®®...');
  generateWeeklyRecommendations();
});

function generateWeeklyRecommendations() {
  // 1. æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
  const users = db.prepare('SELECT id FROM users WHERE is_active = 1').all() as any[];

  for (const user of users) {
    try {
      // 2. ä¸ºæ¯ä¸ªç”¨æˆ·ç”Ÿæˆå»ºè®®
      const recommendations = analyzeUserCampaigns(user.id);

      // 3. ä¿å­˜åˆ°æ•°æ®åº“
      saveRecommendations(user.id, recommendations);

      console.log(`âœ… ç”¨æˆ· ${user.id} çš„å»ºè®®å·²ç”Ÿæˆ (${recommendations.length}æ¡)`);
    } catch (error) {
      console.error(`âŒ ç”¨æˆ· ${user.id} å»ºè®®ç”Ÿæˆå¤±è´¥:`, error);
    }
  }

  console.log('âœ… æ¯å‘¨ä¼˜åŒ–å»ºè®®ç”Ÿæˆå®Œæˆ');
}

function analyzeUserCampaigns(userId: number): Recommendation[] {
  const recommendations: Recommendation[] = [];

  // æŸ¥è¯¢è¿‡å»7å¤©çš„Campaignæ€§èƒ½æ•°æ®
  const campaigns = db.prepare(`
    SELECT
      c.id,
      c.campaign_id,
      c.campaign_name,
      c.offer_id,
      c.budget,
      o.offer_name,
      COALESCE(SUM(p.impressions), 0) as impressions,
      COALESCE(SUM(p.clicks), 0) as clicks,
      CASE
        WHEN SUM(p.impressions) > 0
        THEN CAST(SUM(p.clicks) AS REAL) / SUM(p.impressions)
        ELSE 0
      END as ctr,
      CASE
        WHEN SUM(p.clicks) > 0
        THEN CAST(SUM(p.cost) AS REAL) / SUM(p.clicks)
        ELSE 0
      END as cpc,
      COALESCE(SUM(p.cost), 0) as cost,
      COALESCE(SUM(p.conversions), 0) as conversions,
      CASE
        WHEN SUM(p.conversions) > 0
        THEN CAST(SUM(p.cost) AS REAL) / SUM(p.conversions)
        ELSE 0
      END as cpa,
      CASE
        WHEN SUM(p.cost) > 0
        THEN (SUM(p.conversion_value) - SUM(p.cost)) / SUM(p.cost)
        ELSE 0
      END as roi
    FROM campaigns c
    JOIN offers o ON c.offer_id = o.id
    LEFT JOIN campaign_performance p ON c.campaign_id = p.campaign_id
      AND p.date >= date('now', '-7 days')
    WHERE o.user_id = ? AND c.status = 'ENABLED'
    GROUP BY c.id
  `).all(userId) as any[];

  // è§„åˆ™1: è¯†åˆ«ä½æ•ˆCampaignï¼ˆCTR < è¡Œä¸šå‡å€¼50%ï¼‰
  for (const campaign of campaigns) {
    if (campaign.impressions >= 1000 && campaign.ctr < 0.015) {
      recommendations.push({
        priority: 'high',
        type: 'pause',
        campaign_id: campaign.id,
        campaign_name: campaign.campaign_name,
        offer_name: campaign.offer_name,
        reason: `CTR ${(campaign.ctr * 100).toFixed(1)}%ï¼Œä½äºè¡Œä¸šå‡å€¼60%ï¼Œè¿ç»­7å¤©è¡¨ç°ä¸ä½³`,
        action: 'ç«‹å³æš‚åœæ­¤Campaign',
        expected_impact: `èŠ‚çœé¢„ç®— $${campaign.budget}/å¤©`,
        metrics: {
          ctr: campaign.ctr,
          cpc: campaign.cpc,
          cost: campaign.cost,
          conversions: campaign.conversions,
          cpa: campaign.cpa,
          roi: campaign.roi
        }
      });
    }
  }

  // è§„åˆ™2: è¯†åˆ«é«˜æ•ˆCampaignï¼ˆROI > 200%ï¼‰
  for (const campaign of campaigns) {
    if (campaign.roi > 2.0 && campaign.budget < 200) {
      recommendations.push({
        priority: 'high',
        type: 'increase_budget',
        campaign_id: campaign.id,
        campaign_name: campaign.campaign_name,
        offer_name: campaign.offer_name,
        reason: `CTR ${(campaign.ctr * 100).toFixed(1)}%ï¼ŒROI ${(campaign.roi * 100).toFixed(0)}%ï¼Œè¿ç»­7å¤©è¡¨ç°ä¼˜å¼‚`,
        action: `å¢åŠ æ¯æ—¥é¢„ç®—40%ï¼Œä»$${campaign.budget}/å¤©æå‡è‡³$${(campaign.budget * 1.4).toFixed(0)}/å¤©`,
        expected_impact: `è½¬åŒ–é‡æå‡+35%`,
        metrics: {
          ctr: campaign.ctr,
          cpc: campaign.cpc,
          cost: campaign.cost,
          conversions: campaign.conversions,
          cpa: campaign.cpa,
          roi: campaign.roi
        }
      });
    }
  }

  // è§„åˆ™3: è¯†åˆ«éœ€è¦ä¼˜åŒ–åˆ›æ„çš„Campaignï¼ˆCTRç•¥ä½äºå‡å€¼ï¼‰
  for (const campaign of campaigns) {
    if (campaign.impressions >= 1000 && campaign.ctr >= 0.015 && campaign.ctr < 0.025) {
      recommendations.push({
        priority: 'medium',
        type: 'optimize_creative',
        campaign_id: campaign.id,
        campaign_name: campaign.campaign_name,
        offer_name: campaign.offer_name,
        reason: `CTR ${(campaign.ctr * 100).toFixed(1)}%ï¼Œç•¥ä½äºè¡Œä¸šå‡å€¼`,
        action: 'é‡æ–°ç”Ÿæˆåˆ›æ„ï¼Œå¼ºåŒ–USPå’ŒCTA',
        expected_impact: 'CTRé¢„æœŸæå‡20-30%',
        metrics: {
          ctr: campaign.ctr,
          cpc: campaign.cpc,
          cost: campaign.cost,
          conversions: campaign.conversions,
          cpa: campaign.cpa,
          roi: campaign.roi
        }
      });
    }
  }

  // æŒ‰ä¼˜å…ˆçº§æ’åº
  const priorityOrder = { high: 0, medium: 1, low: 2 };
  recommendations.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);

  return recommendations;
}

function saveRecommendations(userId: number, recommendations: Recommendation[]) {
  // åˆ é™¤ä¸Šå‘¨çš„å»ºè®®
  db.prepare(`
    DELETE FROM weekly_recommendations
    WHERE user_id = ? AND status = 'pending'
  `).run(userId);

  // æ’å…¥æ–°å»ºè®®
  const stmt = db.prepare(`
    INSERT INTO weekly_recommendations (
      user_id, priority, type, campaign_id, campaign_name, offer_name,
      reason, action, expected_impact, metrics, status, created_at
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'pending', datetime('now'))
  `);

  for (const rec of recommendations) {
    stmt.run(
      userId,
      rec.priority,
      rec.type,
      rec.campaign_id,
      rec.campaign_name,
      rec.offer_name,
      rec.reason,
      rec.action,
      rec.expected_impact,
      JSON.stringify(rec.metrics)
    );
  }
}
```

#### 3.4 æ•°æ®åº“Schema

**æ–°å¢è¡¨ï¼šweekly_recommendations**

```sql
CREATE TABLE weekly_recommendations (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,

  -- å»ºè®®å†…å®¹
  priority TEXT NOT NULL,                -- high | medium | low
  type TEXT NOT NULL,                    -- pause | increase_budget | decrease_budget | optimize_creative
  campaign_id INTEGER NOT NULL,
  campaign_name TEXT NOT NULL,
  offer_name TEXT NOT NULL,

  reason TEXT NOT NULL,                  -- å»ºè®®åŸå› 
  action TEXT NOT NULL,                  -- å»ºè®®æ“ä½œ
  expected_impact TEXT NOT NULL,         -- é¢„æœŸæ•ˆæœ

  metrics TEXT NOT NULL,                 -- JSON: {ctr, cpc, cost, conversions, cpa, roi}

  -- çŠ¶æ€è¿½è¸ª
  status TEXT NOT NULL DEFAULT 'pending', -- pending | applied | ignored
  applied_at TEXT,                       -- åº”ç”¨æ—¶é—´

  -- å…ƒæ•°æ®
  created_at TEXT NOT NULL DEFAULT (datetime('now')),

  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (campaign_id) REFERENCES campaigns(id)
);

CREATE INDEX idx_weekly_rec_user_status ON weekly_recommendations(user_id, status);
CREATE INDEX idx_weekly_rec_created ON weekly_recommendations(created_at);
```

#### 3.5 å‰ç«¯API

**GET /api/recommendations/weekly**

```typescript
// app/api/recommendations/weekly/route.ts
import { NextRequest, NextResponse } from 'next/server';
import Database from 'better-sqlite3';
import { requireAuth, AuthenticatedRequest } from '@/lib/auth/middleware';

const db = new Database(process.env.DATABASE_PATH!);

export async function GET(request: NextRequest) {
  const authError = await requireAuth(request);
  if (authError) return authError;

  const user = (request as AuthenticatedRequest).user!;

  const recommendations = db.prepare(`
    SELECT * FROM weekly_recommendations
    WHERE user_id = ? AND status = 'pending'
    ORDER BY
      CASE priority
        WHEN 'high' THEN 0
        WHEN 'medium' THEN 1
        WHEN 'low' THEN 2
      END,
      created_at DESC
  `).all(user.userId);

  return NextResponse.json({ recommendations });
}
```

**POST /api/recommendations/:id/apply**

```typescript
// app/api/recommendations/[id]/apply/route.ts
export async function POST(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  const authError = await requireAuth(request);
  if (authError) return authError;

  const user = (request as AuthenticatedRequest).user!;
  const recId = parseInt(params.id);

  // 1. æŸ¥è¯¢å»ºè®®
  const rec = db.prepare(`
    SELECT * FROM weekly_recommendations
    WHERE id = ? AND user_id = ?
  `).get(recId, user.userId) as any;

  if (!rec) {
    return NextResponse.json({ error: 'Recommendation not found' }, { status: 404 });
  }

  // 2. æ ¹æ®ç±»å‹æ‰§è¡Œæ“ä½œ
  try {
    if (rec.type === 'pause') {
      await pauseCampaign(rec.campaign_id);
    } else if (rec.type === 'increase_budget') {
      const metrics = JSON.parse(rec.metrics);
      const currentBudget = db.prepare('SELECT budget FROM campaigns WHERE id = ?')
        .get(rec.campaign_id) as any;
      const newBudget = currentBudget.budget * 1.4;
      await updateBudget(rec.campaign_id, newBudget);
    }
    // ... å…¶ä»–ç±»å‹

    // 3. æ›´æ–°å»ºè®®çŠ¶æ€
    db.prepare(`
      UPDATE weekly_recommendations
      SET status = 'applied', applied_at = datetime('now')
      WHERE id = ?
    `).run(recId);

    return NextResponse.json({ success: true });
  } catch (error: any) {
    return NextResponse.json({ error: error.message }, { status: 500 });
  }
}

async function pauseCampaign(campaignId: number) {
  db.prepare(`
    UPDATE campaigns SET status = 'PAUSED' WHERE id = ?
  `).run(campaignId);

  // TODO: è°ƒç”¨Google Ads APIæš‚åœCampaign
}

async function updateBudget(campaignId: number, newBudget: number) {
  db.prepare(`
    UPDATE campaigns SET budget = ? WHERE id = ?
  `).run(newBudget, campaignId);

  // TODO: è°ƒç”¨Google Ads APIæ›´æ–°é¢„ç®—
}
```

---

## ğŸš€ å®æ–½æ—¶é—´è¡¨

### æ€»ä½“æ—¶é—´ï¼š**1å‘¨ï¼ˆ5ä¸ªå·¥ä½œæ—¥ï¼‰**

| é˜¶æ®µ | å·¥ä½œå†…å®¹ | æ—¶é—´ | è´Ÿè´£äºº |
|------|---------|------|--------|
| **é˜¶æ®µ1** | Campaignå¯¹æ¯”è§†å›¾ | 3å¤© | å‰ç«¯ + åç«¯ |
| Day 1 | åç«¯APIå®ç° + è§„åˆ™å¼•æ“ | 1å¤© | åç«¯ |
| Day 2 | å‰ç«¯UIå®ç° | 1å¤© | å‰ç«¯ |
| Day 3 | æµ‹è¯• + Bugä¿®å¤ | 1å¤© | QA |
| **é˜¶æ®µ2** | AIè‡ªåŠ¨å­¦ä¹ å†å²åˆ›æ„ | 30åˆ†é’Ÿ | åç«¯ |
| Day 3ä¸‹åˆ | ä¼˜åŒ–AI Prompté€»è¾‘ | 30åˆ†é’Ÿ | åç«¯ |
| **é˜¶æ®µ3** | æ¯å‘¨ä¼˜åŒ–æ¸…å• | 1.5å¤© | åç«¯ |
| Day 4 | è§„åˆ™å¼•æ“ + å®šæ—¶ä»»åŠ¡ | 1å¤© | åç«¯ |
| Day 5 | å‰ç«¯UI + æµ‹è¯• | 0.5å¤© | å‰ç«¯ + QA |

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

### ç”¨æˆ·é‡‡çº³ç‡
- **ç›®æ ‡1**ï¼š60%ç”¨æˆ·ä½¿ç”¨Campaignå¯¹æ¯”è§†å›¾ï¼ˆæ¯å‘¨è‡³å°‘1æ¬¡ï¼‰
- **ç›®æ ‡2**ï¼šAIç”Ÿæˆçš„åˆ›æ„CTRæå‡10%ï¼ˆåŸºäºå†å²å­¦ä¹ ï¼‰
- **ç›®æ ‡3**ï¼š50%ç”¨æˆ·åº”ç”¨æ¯å‘¨ä¼˜åŒ–å»ºè®®ï¼ˆè‡³å°‘1æ¡ï¼‰

### æ€§èƒ½æå‡
- **CTRæå‡**ï¼šé‡‡çº³å»ºè®®çš„ç”¨æˆ·å¹³å‡CTRæå‡15-25%
- **CPCé™ä½**ï¼šé€šè¿‡æš‚åœä½æ•ˆCampaignï¼Œå¹³å‡CPCé™ä½10-15%
- **ROIæå‡**ï¼šé€šè¿‡é¢„ç®—å†åˆ†é…ï¼Œæ•´ä½“ROIæå‡20-30%

### ç³»ç»ŸæŒ‡æ ‡
- **å»ºè®®å‡†ç¡®ç‡**ï¼šåº”ç”¨åæ•ˆæœç¬¦åˆé¢„æœŸçš„æ¯”ä¾‹ > 70%
- **å“åº”é€Ÿåº¦**ï¼šå¯¹æ¯”è§†å›¾åŠ è½½æ—¶é—´ < 2ç§’
- **æ•°æ®æ–°é²œåº¦**ï¼šT+1æ•°æ®åŒæ­¥æˆåŠŸç‡ > 95%

---

## ğŸ”„ è¿­ä»£ä¼˜åŒ–è®¡åˆ’

### ç¬¬ä¸€æ¬¡è¿­ä»£ï¼ˆ1ä¸ªæœˆåï¼‰
**è§‚å¯ŸæŒ‡æ ‡**ï¼š
- ç”¨æˆ·ä½¿ç”¨é¢‘ç‡
- å»ºè®®åº”ç”¨ç‡
- å®é™…æ•ˆæœvsé¢„æœŸæ•ˆæœ

**å¯èƒ½è°ƒæ•´**ï¼š
- ä¼˜åŒ–è§„åˆ™æƒé‡ï¼ˆå¦‚CTRé˜ˆå€¼ä»50%è°ƒæ•´ä¸º60%ï¼‰
- å¢åŠ æ–°çš„å»ºè®®ç±»å‹ï¼ˆå¦‚å…³é”®è¯æ‰©å±•ï¼‰
- è°ƒæ•´ä¼˜å…ˆçº§åˆ†ç±»é€»è¾‘

### ç¬¬äºŒæ¬¡è¿­ä»£ï¼ˆ3ä¸ªæœˆåï¼‰
**åŸºäºæ•°æ®å†³ç­–**ï¼š
- å¦‚æœAIå­¦ä¹ æ•ˆæœæ˜¾è‘— â†’ è€ƒè™‘æ›´å¤šå†å²æ•°æ®ç»´åº¦ï¼ˆROIã€è½¬åŒ–ç‡ç­‰ï¼‰
- å¦‚æœç”¨æˆ·é¢‘ç¹ä½¿ç”¨å¯¹æ¯”è§†å›¾ â†’ è€ƒè™‘å¢åŠ æ›´å¤šå¯¹æ¯”ç»´åº¦
- å¦‚æœå»ºè®®åº”ç”¨ç‡é«˜ â†’ è€ƒè™‘åŠè‡ªåŠ¨åŒ–ï¼ˆç”¨æˆ·ç¡®è®¤åè‡ªåŠ¨æ‰§è¡Œï¼‰

### ç¬¬ä¸‰æ¬¡è¿­ä»£ï¼ˆ6ä¸ªæœˆåï¼‰
**è€ƒè™‘å¢åŠ å¤æ‚åº¦**ï¼ˆä»…åœ¨KISSç‰ˆæœ¬éªŒè¯æˆåŠŸåï¼‰ï¼š
- ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒï¼ˆA/Bæµ‹è¯•æ›´ç§‘å­¦ï¼‰
- å®æ—¶æ•°æ®è¿½è¸ªï¼ˆ6å°æ—¶çº§åŒæ­¥ï¼‰
- ç®€å•çš„MLæ¨¡å‹ï¼ˆé¢„æµ‹CTRï¼‰

**å…³é”®åŸåˆ™**ï¼šåªæœ‰å½“ç”¨æˆ·ç¡®å®éœ€è¦æ—¶ï¼Œæ‰å¢åŠ å¤æ‚åº¦

---

## ğŸ¯ é˜¶æ®µ4ï¼šROIé©±åŠ¨çš„æ™ºèƒ½é¢„ç®—åˆ†é…ï¼ˆ1å¤©ï¼‰

### 4.1 å½“å‰é—®é¢˜

**åŸºç¡€ç‰ˆæœ¬çš„å±€é™**ï¼š
- âŒ å›ºå®šå¢åŠ 40%ï¼Œæœªè€ƒè™‘ROIå·®å¼‚
- âŒ æ— æ€»é¢„ç®—çº¦æŸï¼Œå¯èƒ½è¶…æ”¯
- âŒ æœªè€ƒè™‘è¾¹é™…æ•ˆåº”ï¼ˆé¢„ç®—è¿‡é«˜â†’ROIä¸‹é™ï¼‰
- âŒ æœªè€ƒè™‘è·¨Campaignçš„é¢„ç®—å†åˆ†é…

### 4.2 KISSä¼˜åŒ–æ–¹æ¡ˆ

**ROIé©±åŠ¨çš„æ™ºèƒ½åˆ†é…ç®—æ³•**ï¼ˆä¿æŒç®€å•ï¼‰ï¼š

```typescript
interface BudgetAllocation {
  campaignId: number;
  currentBudget: number;
  suggestedBudget: number;
  increase: number;
  reason: string;
  expectedROI: number;
}

// ä¸»å‡½æ•°ï¼šä¼˜åŒ–é¢„ç®—åˆ†é…
function optimizeBudgetAllocation(
  campaigns: Campaign[],
  totalBudget: number  // ç”¨æˆ·è®¾å®šçš„æ€»é¢„ç®—ä¸Šé™
): BudgetAllocation[] {
  // 1. è®¡ç®—æ¯ä¸ªCampaignçš„é¢„ç®—æ•ˆç‡
  const efficiency = campaigns
    .filter(c => c.status === 'ENABLED')
    .map(c => ({
      campaign: c,
      efficiency: c.roi / c.budget,  // ROI per dollar
      current: c.budget,
      max: Math.min(c.budget * 3, 500),  // æœ€å¤šæ‰©å¤§3å€ï¼Œä½†ä¸è¶…è¿‡$500
      min: c.budget * 0.5  // æœ€å°‘ä¿ç•™50%
    }));

  // 2. æŒ‰æ•ˆç‡æ’åºï¼ˆé«˜ROIä¼˜å…ˆï¼‰
  efficiency.sort((a, b) => b.efficiency - a.efficiency);

  // 3. è®¡ç®—å½“å‰æ€»é¢„ç®—
  const currentTotal = efficiency.reduce((sum, e) => sum + e.current, 0);

  // 4. è®¡ç®—å¯åˆ†é…çš„é¢å¤–é¢„ç®—
  let remaining = totalBudget - currentTotal;
  const allocations: BudgetAllocation[] = [];

  // 5. è´ªå¿ƒç®—æ³•åˆ†é…é¢å¤–é¢„ç®—
  for (const item of efficiency) {
    if (remaining <= 0) {
      // é¢„ç®—ç”¨å°½ï¼Œä¿æŒå½“å‰é¢„ç®—
      allocations.push({
        campaignId: item.campaign.id,
        currentBudget: item.current,
        suggestedBudget: item.current,
        increase: 0,
        reason: 'æ€»é¢„ç®—å·²è¾¾ä¸Šé™',
        expectedROI: item.campaign.roi
      });
      continue;
    }

    // è®¡ç®—è¯¥Campaignçš„æœ€ä¼˜å¢é‡
    const maxIncrease = item.max - item.current;
    const safeIncrease = Math.min(
      maxIncrease,
      remaining,
      item.current * 0.5  // å•æ¬¡æœ€å¤šå¢åŠ 50%
    );

    if (item.campaign.roi > 1.5 && safeIncrease > 0) {
      // ROI > 150%ï¼Œå€¼å¾—å¢åŠ é¢„ç®—
      allocations.push({
        campaignId: item.campaign.id,
        currentBudget: item.current,
        suggestedBudget: item.current + safeIncrease,
        increase: safeIncrease,
        reason: `ROI ${(item.campaign.roi * 100).toFixed(0)}%ï¼Œé¢„ç®—æ•ˆç‡${item.efficiency.toFixed(2)}`,
        expectedROI: item.campaign.roi * 0.95  // é¢„æœŸROIç•¥æœ‰ä¸‹é™
      });
      remaining -= safeIncrease;
    } else {
      // ROIè¾ƒä½ï¼Œä¿æŒæˆ–å‡å°‘é¢„ç®—
      allocations.push({
        campaignId: item.campaign.id,
        currentBudget: item.current,
        suggestedBudget: item.current,
        increase: 0,
        reason: `ROI ${(item.campaign.roi * 100).toFixed(0)}%ï¼Œæš‚ä¸å¢åŠ é¢„ç®—`,
        expectedROI: item.campaign.roi
      });
    }
  }

  // 6. å¦‚æœè¿˜æœ‰å‰©ä½™é¢„ç®—ï¼Œåˆ†é…ç»™æ•ˆç‡æœ€é«˜çš„Campaign
  if (remaining > 10) {
    const topEfficient = allocations[0];
    if (topEfficient && topEfficient.suggestedBudget < efficiency[0].max) {
      const additionalIncrease = Math.min(remaining, efficiency[0].max - topEfficient.suggestedBudget);
      topEfficient.suggestedBudget += additionalIncrease;
      topEfficient.increase += additionalIncrease;
      topEfficient.reason += ` + å‰©ä½™é¢„ç®—${additionalIncrease.toFixed(0)}`;
    }
  }

  return allocations;
}

// è¾…åŠ©å‡½æ•°ï¼šè€ƒè™‘è¾¹é™…æ•ˆåº”çš„ROIé¢„æµ‹
function estimateROIWithBudgetIncrease(
  campaign: Campaign,
  budgetIncrease: number
): number {
  // ç®€å•çš„è¾¹é™…æ•ˆåº”æ¨¡å‹ï¼šé¢„ç®—å¢åŠ åï¼ŒROIç•¥æœ‰ä¸‹é™
  const increaseRate = budgetIncrease / campaign.budget;

  if (increaseRate < 0.3) {
    return campaign.roi * 0.98;  // é¢„ç®—å¢åŠ <30%ï¼ŒROIä¸‹é™2%
  } else if (increaseRate < 0.5) {
    return campaign.roi * 0.95;  // é¢„ç®—å¢åŠ 30-50%ï¼ŒROIä¸‹é™5%
  } else {
    return campaign.roi * 0.90;  // é¢„ç®—å¢åŠ >50%ï¼ŒROIä¸‹é™10%
  }
}
```

### 4.3 é›†æˆåˆ°æ¯å‘¨ä¼˜åŒ–å»ºè®®

**æ›´æ–°è§„åˆ™2ï¼šæ™ºèƒ½é¢„ç®—å¢åŠ å»ºè®®**ï¼š

```typescript
// åœ¨æ¯å‘¨ä¼˜åŒ–ä¸­ç”Ÿæˆé¢„ç®—åˆ†é…å»ºè®®
function generateBudgetRecommendations(userId: number) {
  // 1. è·å–ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒCampaign
  const campaigns = getActiveCampaigns(userId);

  // 2. è·å–ç”¨æˆ·è®¾å®šçš„æ€»é¢„ç®—ï¼ˆå¦‚æœæœ‰ï¼‰
  const userBudgetLimit = getUserBudgetLimit(userId) || 10000;  // é»˜è®¤$10000

  // 3. è®¡ç®—æœ€ä¼˜é¢„ç®—åˆ†é…
  const allocations = optimizeBudgetAllocation(campaigns, userBudgetLimit);

  // 4. ç”Ÿæˆå»ºè®®
  const recommendations: Recommendation[] = [];

  for (const alloc of allocations) {
    if (alloc.increase > 10) {
      // å»ºè®®å¢åŠ é¢„ç®—
      recommendations.push({
        priority: 'high',
        type: 'increase_budget',
        campaign_id: alloc.campaignId,
        reason: `${alloc.reason}`,
        action: `é¢„ç®— $${alloc.currentBudget}/å¤© â†’ $${alloc.suggestedBudget.toFixed(0)}/å¤© (+${alloc.increase.toFixed(0)})`,
        expected_impact: `é¢„æœŸROI ${(alloc.expectedROI * 100).toFixed(0)}%ï¼Œè½¬åŒ–é‡æå‡${((alloc.increase / alloc.currentBudget) * 0.8 * 100).toFixed(0)}%`
      });
    } else if (alloc.increase < -10) {
      // å»ºè®®å‡å°‘é¢„ç®—
      recommendations.push({
        priority: 'medium',
        type: 'decrease_budget',
        campaign_id: alloc.campaignId,
        reason: `ROIè¾ƒä½ï¼Œå»ºè®®å‡å°‘é¢„ç®—é‡æ–°åˆ†é…`,
        action: `é¢„ç®— $${alloc.currentBudget}/å¤© â†’ $${alloc.suggestedBudget.toFixed(0)}/å¤©`,
        expected_impact: `èŠ‚çœé¢„ç®— $${Math.abs(alloc.increase).toFixed(0)}/å¤©`
      });
    }
  }

  return recommendations;
}
```

### 4.4 é¢„æœŸæ•ˆæœ

| ç»´åº¦ | åŸºç¡€ç‰ˆæœ¬ | æ™ºèƒ½åˆ†é…ç‰ˆæœ¬ |
|------|---------|-------------|
| åˆ†é…é€»è¾‘ | å›ºå®šå¢åŠ 40% | **ROIæ•ˆç‡æ’åº** |
| æ€»é¢„ç®—æ§åˆ¶ | âŒ æ—  | **âœ… ä¸Šé™çº¦æŸ** |
| è¾¹é™…æ•ˆåº” | âŒ æœªè€ƒè™‘ | **âœ… ROIè¡°å‡æ¨¡å‹** |
| è·¨Campaignä¼˜åŒ– | âŒ å•ç‹¬è¯„ä¼° | **âœ… å…¨å±€æœ€ä¼˜** |
| é¢„ç®—åˆ©ç”¨ç‡ | 70% | **90%+** |
| æ€»ROIæå‡ | 20% | **30-35%** |

---

## ğŸš€ é˜¶æ®µ5ï¼šæ‰©å±•ä¼˜åŒ–è§„åˆ™ï¼ˆè§„åˆ™5-8ï¼‰ï¼ˆ2å¤©ï¼‰

### 5.1 æ–°å¢è§„åˆ™æ€»è§ˆ

| è§„åˆ™ | ç±»å‹ | ä¼˜å…ˆçº§ | æ•°æ®æº | å®æ–½æ—¶é—´ |
|------|------|--------|--------|---------|
| è§„åˆ™5 | å…³é”®è¯ä¼˜åŒ– | ä¸­ | æœç´¢è¯æŠ¥å‘Š | 0.5å¤© |
| è§„åˆ™6 | å‡ºä»·ä¼˜åŒ– | ä¸­ | å°æ—¶çº§è½¬åŒ–æ•°æ® | 0.5å¤© |
| è§„åˆ™7 | æŠ•æ”¾æ—¶æ®µä¼˜åŒ– | ä½ | å°æ—¶çº§CTRæ•°æ® | 0.5å¤© |
| è§„åˆ™8 | è®¾å¤‡ä¼˜åŒ– | ä¸­ | è®¾å¤‡ç»´åº¦æ•°æ® | 0.5å¤© |

### 5.2 è§„åˆ™5ï¼šå…³é”®è¯ä¼˜åŒ–

**ç›®æ ‡**ï¼šä»æœç´¢è¯æŠ¥å‘Šä¸­å‘ç°é«˜æ½œåŠ›å…³é”®è¯ï¼Œæ‰©å¤§ç›¸å…³æµé‡

```
è§¦å‘æ¡ä»¶ï¼š
  AND æœç´¢è¯æŠ¥å‘Šä¸­å­˜åœ¨æœªæ·»åŠ çš„é«˜CTRæœç´¢è¯
  AND è¯¥æœç´¢è¯å±•ç¤ºé‡ >= 100
  AND è¯¥æœç´¢è¯CTR > Campaignå¹³å‡CTR * 1.2

ä¼˜å…ˆçº§ï¼šä¸­
å»ºè®®ï¼šæ·»åŠ å…³é”®è¯ "${keyword}"ï¼ˆ${matchType}åŒ¹é…ï¼‰
é¢„æœŸå½±å“ï¼šæ‰©å¤§ç›¸å…³æµé‡10-15%

å®ç°é€»è¾‘ï¼š
```typescript
function analyzeSearchTerms(campaignId: number): Recommendation[] {
  const searchTerms = db.prepare(`
    SELECT
      search_term,
      SUM(impressions) as total_impressions,
      SUM(clicks) as total_clicks,
      CAST(SUM(clicks) AS REAL) / SUM(impressions) as ctr
    FROM search_term_reports
    WHERE campaign_id = ?
      AND date >= date('now', '-7 days')
    GROUP BY search_term
    HAVING total_impressions >= 100
    ORDER BY ctr DESC
    LIMIT 20
  `).all(campaignId) as any[];

  const campaign = getCampaign(campaignId);
  const existingKeywords = getExistingKeywords(campaignId);

  const recommendations: Recommendation[] = [];

  for (const term of searchTerms) {
    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
    if (existingKeywords.includes(term.search_term)) continue;

    // æ£€æŸ¥CTRæ˜¯å¦é«˜äºå¹³å‡å€¼
    if (term.ctr > campaign.ctr * 1.2) {
      recommendations.push({
        priority: 'medium',
        type: 'add_keyword',
        campaign_id: campaignId,
        reason: `æœç´¢è¯"${term.search_term}"CTR ${(term.ctr * 100).toFixed(2)}%ï¼Œé«˜äºå¹³å‡${((term.ctr / campaign.ctr - 1) * 100).toFixed(0)}%`,
        action: `æ·»åŠ å…³é”®è¯"${term.search_term}"ï¼ˆçŸ­è¯­åŒ¹é…ï¼‰`,
        expected_impact: `é¢„è®¡æ‰©å¤§ç›¸å…³æµé‡10-15%`
      });
    }
  }

  return recommendations.slice(0, 3);  // æœ€å¤š3ä¸ªå…³é”®è¯å»ºè®®
}
```

### 5.3 è§„åˆ™6ï¼šåˆ†æ—¶æ®µå‡ºä»·ä¼˜åŒ–

**ç›®æ ‡**ï¼šåœ¨è½¬åŒ–é«˜å³°æ—¶æ®µæé«˜å‡ºä»·ï¼Œæå‡è½¬åŒ–é‡

```
è§¦å‘æ¡ä»¶ï¼š
  AND å­˜åœ¨æ˜æ˜¾è½¬åŒ–é«˜å³°æ—¶æ®µï¼ˆæŸ3å°æ—¶è½¬åŒ–ç‡ > å¹³å‡å€¼ * 1.5ï¼‰
  AND å½“å‰æœªè®¾ç½®åˆ†æ—¶æ®µå‡ºä»·
  AND Campaignè½¬åŒ–é‡ >= 20ï¼ˆæ•°æ®å……è¶³ï¼‰

ä¼˜å…ˆçº§ï¼šä¸­
å»ºè®®ï¼šåœ¨é«˜å³°æ—¶æ®µï¼ˆ${hours}ï¼‰æé«˜å‡ºä»·15-20%
é¢„æœŸå½±å“ï¼šè½¬åŒ–é‡æå‡15-20%

å®ç°é€»è¾‘ï¼š
```typescript
function analyzeHourlyPerformance(campaignId: number): Recommendation | null {
  const hourlyData = db.prepare(`
    SELECT
      hour_of_day,
      SUM(impressions) as impressions,
      SUM(clicks) as clicks,
      SUM(conversions) as conversions,
      CASE
        WHEN SUM(clicks) > 0
        THEN CAST(SUM(conversions) AS REAL) / SUM(clicks)
        ELSE 0
      END as conversion_rate
    FROM campaign_performance_hourly
    WHERE campaign_id = ?
      AND date >= date('now', '-14 days')
    GROUP BY hour_of_day
    ORDER BY conversion_rate DESC
  `).all(campaignId) as any[];

  if (hourlyData.length === 0) return null;

  // è®¡ç®—å¹³å‡è½¬åŒ–ç‡
  const avgConversionRate = hourlyData.reduce((sum, h) => sum + h.conversion_rate, 0) / hourlyData.length;

  // æ‰¾å‡ºé«˜å³°æ—¶æ®µï¼ˆè½¬åŒ–ç‡ > å¹³å‡å€¼ * 1.5ï¼‰
  const peakHours = hourlyData
    .filter(h => h.conversion_rate > avgConversionRate * 1.5 && h.conversions >= 5)
    .map(h => h.hour_of_day);

  if (peakHours.length >= 2) {
    return {
      priority: 'medium',
      type: 'adjust_schedule',
      campaign_id: campaignId,
      reason: `å‘ç°è½¬åŒ–é«˜å³°æ—¶æ®µï¼ˆ${peakHours.join(', ')}ç‚¹ï¼‰ï¼Œè½¬åŒ–ç‡é«˜å‡ºå¹³å‡50%+`,
      action: `åœ¨é«˜å³°æ—¶æ®µï¼ˆ${peakHours.join(', ')}:00ï¼‰æé«˜å‡ºä»·18%`,
      expected_impact: `é¢„è®¡è½¬åŒ–é‡æå‡15-20%`
    };
  }

  return null;
}
```

### 5.4 è§„åˆ™7ï¼šæŠ•æ”¾æ—¶æ®µä¼˜åŒ–

**ç›®æ ‡**ï¼šå‡å°‘ä½æ•ˆæ—¶æ®µæŠ•æ”¾ï¼ŒèŠ‚çœé¢„ç®—

```
è§¦å‘æ¡ä»¶ï¼š
  AND å­˜åœ¨æ˜æ˜¾ä½æ•ˆæ—¶æ®µï¼ˆæŸæ—¶æ®µCTR < å¹³å‡å€¼ * 0.5ï¼‰
  AND è¯¥æ—¶æ®µèŠ±è´¹ > æ€»èŠ±è´¹çš„10%
  AND è¿ç»­7å¤©ä½æ•ˆ

ä¼˜å…ˆçº§ï¼šä½
å»ºè®®ï¼šå‡å°‘ä½æ•ˆæ—¶æ®µæŠ•æ”¾ï¼ˆ${hours}ï¼‰ï¼Œæˆ–æš‚åœæŠ•æ”¾
é¢„æœŸå½±å“ï¼šèŠ‚çœé¢„ç®—15%ï¼Œä¿æŒè½¬åŒ–é‡

å®ç°é€»è¾‘ï¼š
```typescript
function analyzeLowPerformanceHours(campaignId: number): Recommendation | null {
  const hourlyData = db.prepare(`
    SELECT
      hour_of_day,
      SUM(cost) as cost,
      CAST(SUM(clicks) AS REAL) / NULLIF(SUM(impressions), 0) as ctr
    FROM campaign_performance_hourly
    WHERE campaign_id = ?
      AND date >= date('now', '-7 days')
    GROUP BY hour_of_day
  `).all(campaignId) as any[];

  const totalCost = hourlyData.reduce((sum, h) => sum + h.cost, 0);
  const avgCTR = hourlyData.reduce((sum, h) => sum + (h.ctr || 0), 0) / hourlyData.length;

  // æ‰¾å‡ºä½æ•ˆæ—¶æ®µ
  const lowEffHours = hourlyData.filter(h =>
    h.ctr < avgCTR * 0.5 && (h.cost / totalCost) > 0.1
  );

  if (lowEffHours.length > 0) {
    const hours = lowEffHours.map(h => h.hour_of_day).join(', ');
    const savedCost = lowEffHours.reduce((sum, h) => sum + h.cost, 0);

    return {
      priority: 'low',
      type: 'adjust_schedule',
      campaign_id: campaignId,
      reason: `æ—¶æ®µ${hours}ç‚¹CTRä½äºå¹³å‡50%ï¼Œä½†å æ€»èŠ±è´¹${((savedCost / totalCost) * 100).toFixed(0)}%`,
      action: `å‡å°‘${hours}ç‚¹çš„æŠ•æ”¾ï¼Œæˆ–å‡ºä»·é™ä½30%`,
      expected_impact: `èŠ‚çœé¢„ç®— $${(savedCost * 0.7 / 7).toFixed(0)}/å¤©`
    };
  }

  return null;
}
```

### 5.5 è§„åˆ™8ï¼šè®¾å¤‡ä¼˜åŒ–

**ç›®æ ‡**ï¼šé’ˆå¯¹è®¾å¤‡å·®å¼‚è°ƒæ•´ç­–ç•¥

```
è§¦å‘æ¡ä»¶ï¼š
  AND ç§»åŠ¨/æ¡Œé¢CTRå·®å¼‚ > 50%
  AND ä¸¤è®¾å¤‡å‡æœ‰å……è¶³æ•°æ®ï¼ˆå±•ç¤ºé‡ >= 500ï¼‰
  AND æœªè®¾ç½®è®¾å¤‡å‡ºä»·è°ƒæ•´

ä¼˜å…ˆçº§ï¼šä¸­
å»ºè®®ï¼šå‡å°‘ä½æ•ˆè®¾å¤‡çš„å‡ºä»·ï¼Œæˆ–åˆ›å»ºè®¾å¤‡å®šå‘Campaign
é¢„æœŸå½±å“ï¼šCTRæå‡25%ï¼Œæˆ–æˆæœ¬é™ä½20%

å®ç°é€»è¾‘ï¼š
```typescript
function analyzeDevicePerformance(campaignId: number): Recommendation | null {
  const deviceData = db.prepare(`
    SELECT
      device,
      SUM(impressions) as impressions,
      SUM(clicks) as clicks,
      SUM(cost) as cost,
      CAST(SUM(clicks) AS REAL) / NULLIF(SUM(impressions), 0) as ctr
    FROM campaign_performance_device
    WHERE campaign_id = ?
      AND date >= date('now', '-7 days')
    GROUP BY device
  `).all(campaignId) as any[];

  if (deviceData.length < 2) return null;

  const mobile = deviceData.find(d => d.device === 'MOBILE');
  const desktop = deviceData.find(d => d.device === 'DESKTOP');

  if (!mobile || !desktop) return null;
  if (mobile.impressions < 500 || desktop.impressions < 500) return null;

  const ctrRatio = mobile.ctr / desktop.ctr;

  if (ctrRatio < 0.5) {
    // ç§»åŠ¨ç«¯CTRæ˜¾è‘—ä½äºæ¡Œé¢ç«¯
    return {
      priority: 'medium',
      type: 'device_optimization',
      campaign_id: campaignId,
      reason: `ç§»åŠ¨ç«¯CTR ${(mobile.ctr * 100).toFixed(2)}%ï¼Œä»…ä¸ºæ¡Œé¢ç«¯${((ctrRatio) * 100).toFixed(0)}%`,
      action: `ç§»åŠ¨ç«¯å‡ºä»·é™ä½40%ï¼Œæˆ–åˆ›å»ºä»…æ¡Œé¢ç«¯Campaign`,
      expected_impact: `CTRæå‡è‡³${(desktop.ctr * 100).toFixed(2)}%æˆ–æˆæœ¬é™ä½20%`
    };
  } else if (ctrRatio > 2.0) {
    // ç§»åŠ¨ç«¯CTRæ˜¾è‘—é«˜äºæ¡Œé¢ç«¯
    return {
      priority: 'medium',
      type: 'device_optimization',
      campaign_id: campaignId,
      reason: `ç§»åŠ¨ç«¯CTR ${(mobile.ctr * 100).toFixed(2)}%ï¼Œæ˜¯æ¡Œé¢ç«¯${ctrRatio.toFixed(1)}å€`,
      action: `ç§»åŠ¨ç«¯å‡ºä»·æé«˜30%ï¼Œæˆ–åˆ›å»ºç§»åŠ¨ç«¯ä¸“å±Campaign`,
      expected_impact: `è½¬åŒ–é‡æå‡25%`
    };
  }

  return null;
}
```

### 5.6 è§„åˆ™é›†æˆæ€»è§ˆ

**æ›´æ–°åçš„å®Œæ•´è§„åˆ™å¼•æ“**ï¼š

```typescript
function generateAllRecommendations(userId: number): Recommendation[] {
  const recommendations: Recommendation[] = [];

  const campaigns = getActiveCampaigns(userId);

  for (const campaign of campaigns) {
    // åŸºç¡€è§„åˆ™1-4ï¼ˆä¿æŒä¸å˜ï¼‰
    recommendations.push(...applyBasicRules(campaign));

    // æ–°å¢è§„åˆ™5-8
    const keywordRec = analyzeSearchTerms(campaign.id);
    if (keywordRec) recommendations.push(...keywordRec);

    const hourlyRec = analyzeHourlyPerformance(campaign.id);
    if (hourlyRec) recommendations.push(hourlyRec);

    const scheduleRec = analyzeLowPerformanceHours(campaign.id);
    if (scheduleRec) recommendations.push(scheduleRec);

    const deviceRec = analyzeDevicePerformance(campaign.id);
    if (deviceRec) recommendations.push(deviceRec);
  }

  // æŒ‰ä¼˜å…ˆçº§æ’åº
  const priorityOrder = { high: 0, medium: 1, low: 2 };
  recommendations.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);

  return recommendations;
}
```

---

## ğŸ“Š é˜¶æ®µ6ï¼šæ€§èƒ½åŸºå‡†ä¸A/Bæµ‹è¯•æ¡†æ¶ï¼ˆ1å¤©ï¼‰

### 6.1 è¡Œä¸šåŸºå‡†æ•°æ®

**Google Adså„è¡Œä¸šå¹³å‡æŒ‡æ ‡**ï¼ˆ2024å¹´æ•°æ®ï¼‰ï¼š

| è¡Œä¸š | å¹³å‡CTR | å¹³å‡CPC | å¹³å‡è½¬åŒ–ç‡ |
|------|---------|---------|------------|
| ç”µå•†/é›¶å”® | 2.69% | $1.16 | 2.81% |
| æœè£…/æ—¶å°š | 2.01% | $1.40 | 2.77% |
| æ•™è‚²åŸ¹è®­ | 3.78% | $2.40 | 3.39% |
| æ—…æ¸¸é…’åº— | 4.68% | $1.53 | 3.55% |
| B2BæœåŠ¡ | 2.41% | $3.33 | 2.23% |
| å¥åº·/ç¾å®¹ | 1.94% | $2.48 | 2.65% |

**åŠ¨æ€åŸºå‡†æŸ¥è¯¢**ï¼š

```typescript
function getIndustryBenchmark(industry: string): Benchmark {
  const benchmarks: Record<string, Benchmark> = {
    'ecommerce': { ctr: 0.0269, cpc: 1.16, conversionRate: 0.0281 },
    'fashion': { ctr: 0.0201, cpc: 1.40, conversionRate: 0.0277 },
    'education': { ctr: 0.0378, cpc: 2.40, conversionRate: 0.0339 },
    // ... å…¶ä»–è¡Œä¸š
  };

  return benchmarks[industry] || benchmarks['ecommerce'];  // é»˜è®¤ç”µå•†
}

// ç”¨æˆ·è®¾ç½®è¡Œä¸š
function setUserIndustry(userId: number, industry: string) {
  db.prepare(`
    UPDATE users SET industry = ? WHERE id = ?
  `).run(industry, userId);
}

// åœ¨ä¼˜åŒ–å»ºè®®ä¸­ä½¿ç”¨è¡Œä¸šåŸºå‡†
function generateRecommendationsWithBenchmark(campaign: Campaign) {
  const user = getUser(campaign.userId);
  const benchmark = getIndustryBenchmark(user.industry);

  if (campaign.ctr < benchmark.ctr * 0.5) {
    return {
      priority: 'high',
      type: 'pause',
      reason: `CTR ${(campaign.ctr * 100).toFixed(2)}%ï¼Œè¿œä½äº${user.industry}è¡Œä¸šå‡å€¼${(benchmark.ctr * 100).toFixed(2)}%`,
      action: 'ç«‹å³æš‚åœæˆ–é‡æ–°ç”Ÿæˆåˆ›æ„'
    };
  }
}
```

### 6.2 ç”¨æˆ·å†å²åŸºå‡†

**ä¸ªäººæœ€ä½³è®°å½•è¿½è¸ª**ï¼š

```typescript
interface UserBenchmark {
  bestCTR: number;
  bestROI: number;
  bestCPA: number;
  avgCTR: number;
  avgROI: number;
  campaignCount: number;
}

function getUserHistoricalBenchmark(userId: number): UserBenchmark {
  const stats = db.prepare(`
    SELECT
      MAX(ctr) as best_ctr,
      MAX(roi) as best_roi,
      MIN(cpa) as best_cpa,
      AVG(ctr) as avg_ctr,
      AVG(roi) as avg_roi,
      COUNT(*) as campaign_count
    FROM campaigns
    WHERE user_id = ?
      AND impressions >= 1000
      AND status = 'ENABLED'
  `).get(userId) as any;

  return {
    bestCTR: stats.best_ctr || 0,
    bestROI: stats.best_roi || 0,
    bestCPA: stats.best_cpa || 999,
    avgCTR: stats.avg_ctr || 0,
    avgROI: stats.avg_roi || 0,
    campaignCount: stats.campaign_count || 0
  };
}

// åœ¨Dashboardæ˜¾ç¤º
function renderBenchmarkCard(benchmark: UserBenchmark) {
  return `
    æ‚¨çš„å†å²æœ€ä½³è¡¨ç°ï¼š
    - æœ€é«˜CTR: ${(benchmark.bestCTR * 100).toFixed(2)}%
    - æœ€é«˜ROI: ${(benchmark.bestROI * 100).toFixed(0)}%
    - æœ€ä½CPA: $${benchmark.bestCPA.toFixed(2)}
    - å¹³å‡CTR: ${(benchmark.avgCTR * 100).toFixed(2)}%
  `;
}
```

### 6.3 A/Bæµ‹è¯•æ¡†æ¶ï¼ˆKISSç‰ˆï¼‰

**ä½•æ—¶åˆ›å»ºå˜ä½“æµ‹è¯•**ï¼š

```typescript
function suggestABTest(campaign: Campaign): ABTestSuggestion | null {
  // è§„åˆ™1: Campaignè¿è¡Œæ—¶é—´ >= 7å¤©
  const runningDays = calculateRunningDays(campaign.created_at);
  if (runningDays < 7) return null;

  // è§„åˆ™2: æ ·æœ¬é‡å……è¶³ï¼ˆå±•ç¤ºé‡ >= 5000ï¼‰
  if (campaign.impressions < 5000) return null;

  // è§„åˆ™3: CTRä¸é«˜ä¸ä½ï¼ˆ2-4%ä¹‹é—´ï¼‰
  if (campaign.ctr < 0.02 || campaign.ctr > 0.04) return null;

  return {
    reason: `Campaignè¡¨ç°ç¨³å®šï¼ˆCTR ${(campaign.ctr * 100).toFixed(2)}%ï¼‰ï¼Œå»ºè®®åˆ›å»ºå˜ä½“æµ‹è¯•è¿›ä¸€æ­¥ä¼˜åŒ–`,
    testVariables: [
      'æµ‹è¯•ä¸åŒçš„æ ‡é¢˜é£æ ¼ï¼ˆå“ç‰Œå¯¼å‘ vs åŠŸèƒ½å¯¼å‘ï¼‰',
      'æµ‹è¯•ä¸åŒçš„CTAï¼ˆ"ç«‹å³è´­ä¹°" vs "äº†è§£æ›´å¤š"ï¼‰',
      'æµ‹è¯•æ˜¯å¦æ·»åŠ ä»·æ ¼ä¿¡æ¯'
    ],
    expectedUplift: '15-25%',
    testDuration: '7-14å¤©'
  };
}
```

**A/Bæµ‹è¯•ç»“æœè¯„ä¼°**ï¼š

```typescript
function evaluateABTest(variantA: Campaign, variantB: Campaign): TestResult {
  // 1. æ£€æŸ¥æ ·æœ¬é‡æ˜¯å¦å……è¶³
  if (variantA.impressions < 1000 || variantB.impressions < 1000) {
    return {
      status: 'insufficient_data',
      message: 'æ ·æœ¬é‡ä¸è¶³ï¼Œå»ºè®®ç»§ç»­è¿è¡Œè‡³å±•ç¤ºé‡è¾¾åˆ°1000+'
    };
  }

  // 2. ç®€å•çš„å·®å¼‚æ£€éªŒï¼ˆä¸ä½¿ç”¨å¤æ‚ç»Ÿè®¡ï¼‰
  const ctrDiff = Math.abs(variantA.ctr - variantB.ctr);
  const avgCTR = (variantA.ctr + variantB.ctr) / 2;
  const diffPercentage = ctrDiff / avgCTR;

  // 3. åˆ¤æ–­æ˜¾è‘—æ€§ï¼ˆç®€å•è§„åˆ™ï¼‰
  if (diffPercentage > 0.2 && Math.max(variantA.impressions, variantB.impressions) > 3000) {
    // å·®å¼‚ > 20%ï¼Œä¸”æ ·æœ¬é‡ > 3000ï¼Œè®¤ä¸ºæ˜¾è‘—
    const winner = variantA.ctr > variantB.ctr ? variantA : variantB;
    const loser = variantA.ctr > variantB.ctr ? variantB : variantA;

    return {
      status: 'significant_difference',
      winner: winner.name,
      winnerCTR: winner.ctr,
      loserCTR: loser.ctr,
      uplift: ((winner.ctr - loser.ctr) / loser.ctr * 100).toFixed(1) + '%',
      suggestion: `å»ºè®®æš‚åœ${loser.name}ï¼Œé›†ä¸­é¢„ç®—åˆ°${winner.name}`,
      confidence: 'medium'
    };
  } else if (diffPercentage < 0.1) {
    return {
      status: 'no_clear_winner',
      message: `ä¸¤ä¸ªå˜ä½“è¡¨ç°æ¥è¿‘ï¼ˆå·®å¼‚${(diffPercentage * 100).toFixed(1)}%ï¼‰ï¼Œå»ºè®®ç»§ç»­è¿è¡Œ3-5å¤©`,
      suggestion: 'æˆ–å°è¯•æ›´å¤§èƒ†çš„å˜åŒ–ï¼ˆå¦‚å®Œå…¨ä¸åŒçš„åˆ›æ„é£æ ¼ï¼‰'
    };
  } else {
    return {
      status: 'trending',
      message: `${variantA.ctr > variantB.ctr ? variantA.name : variantB.name}ç•¥æœ‰é¢†å…ˆï¼Œä½†å·®å¼‚ä¸æ˜¾è‘—`,
      suggestion: 'å»ºè®®ç»§ç»­è§‚å¯Ÿï¼Œæ ·æœ¬é‡è¾¾åˆ°5000+åå†åšå†³ç­–'
    };
  }
}
```

### 6.4 ä¼˜åŒ–æ•ˆæœè¿½è¸ª

**å»ºè®®åº”ç”¨å‰åå¯¹æ¯”**ï¼š

```typescript
interface RecommendationEffect {
  recommendationId: number;
  appliedAt: string;
  before: {
    ctr: number;
    cpc: number;
    roi: number;
  };
  after: {
    ctr: number;
    cpc: number;
    roi: number;
  };
  improvement: {
    ctrChange: string;
    cpcChange: string;
    roiChange: string;
  };
  verdict: 'positive' | 'negative' | 'neutral';
}

function trackRecommendationEffect(recommendationId: number): RecommendationEffect {
  const rec = getRecommendation(recommendationId);
  const campaign = getCampaign(rec.campaign_id);

  // è·å–åº”ç”¨å‰7å¤©çš„å¹³å‡æŒ‡æ ‡
  const before = getMetrics(rec.campaign_id, rec.applied_at, -7);

  // è·å–åº”ç”¨å7å¤©çš„å¹³å‡æŒ‡æ ‡
  const after = getMetrics(rec.campaign_id, rec.applied_at, 7);

  const improvement = {
    ctrChange: `${((after.ctr - before.ctr) / before.ctr * 100).toFixed(1)}%`,
    cpcChange: `${((after.cpc - before.cpc) / before.cpc * 100).toFixed(1)}%`,
    roiChange: `${((after.roi - before.roi) / before.roi * 100).toFixed(1)}%`
  };

  // åˆ¤æ–­æ•ˆæœ
  let verdict: 'positive' | 'negative' | 'neutral';
  if (after.ctr > before.ctr * 1.1 || after.roi > before.roi * 1.1) {
    verdict = 'positive';
  } else if (after.ctr < before.ctr * 0.9 || after.roi < before.roi * 0.9) {
    verdict = 'negative';
  } else {
    verdict = 'neutral';
  }

  return {
    recommendationId,
    appliedAt: rec.applied_at,
    before,
    after,
    improvement,
    verdict
  };
}

// Dashboardå±•ç¤º
function renderEffectTrackingCard() {
  const effects = getAllRecommendationEffects(userId);

  const positive = effects.filter(e => e.verdict === 'positive').length;
  const total = effects.length;
  const successRate = total > 0 ? (positive / total * 100).toFixed(0) : 0;

  return `
    ä¼˜åŒ–å»ºè®®æ•ˆæœç»Ÿè®¡ï¼š
    - æ€»åº”ç”¨å»ºè®®: ${total}æ¡
    - æœ‰æ•ˆå»ºè®®: ${positive}æ¡ (${successRate}%)
    - å¹³å‡CTRæå‡: ${calculateAvgCTRImprovement(effects)}%
    - å¹³å‡ROIæå‡: ${calculateAvgROIImprovement(effects)}%
  `;
}
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–è®¾è®¡

### 1. APIåˆ†é¡µï¼ˆå¿…éœ€ï¼‰

**è®¾è®¡åŸåˆ™**ï¼šæ‰€æœ‰åˆ—è¡¨æŸ¥è¯¢APIå¿…é¡»æ”¯æŒåˆ†é¡µï¼Œé¿å…å¤§æ•°æ®é‡æŸ¥è¯¢

**å¿…é¡»åˆ†é¡µçš„API**ï¼š
- `GET /api/campaign_performance` - æ€§èƒ½æ•°æ®åˆ—è¡¨ï¼ˆå¯èƒ½æœ‰æ•°åƒæ¡è®°å½•ï¼‰
- `GET /api/weekly_recommendations` - ä¼˜åŒ–å»ºè®®åˆ—è¡¨
- `GET /api/search_term_reports` - æœç´¢è¯æŠ¥å‘Šï¼ˆå¯èƒ½æœ‰æ•°ç™¾æ¡ï¼‰

**æ ‡å‡†åˆ†é¡µå‚æ•°**ï¼š
```typescript
interface PaginationParams {
  page?: number;      // é¡µç ï¼ˆä»1å¼€å§‹ï¼‰ï¼Œé»˜è®¤1
  limit?: number;     // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
}

// ç¤ºä¾‹ï¼šGET /api/campaign_performance?page=1&limit=20&campaignId=123
```

### 2. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

**æ ¸å¿ƒç´¢å¼•**ï¼ˆç¡®ä¿æŸ¥è¯¢æ€§èƒ½ï¼‰ï¼š
```sql
-- campaign_performanceè¡¨ï¼ˆæ€§èƒ½æ•°æ®æŸ¥è¯¢ï¼‰
CREATE INDEX idx_performance_campaign_date
  ON campaign_performance(campaign_id, date DESC);
CREATE INDEX idx_performance_user_date
  ON campaign_performance(user_id, date DESC);

-- weekly_recommendationsè¡¨ï¼ˆå»ºè®®åˆ—è¡¨æŸ¥è¯¢ï¼‰
CREATE INDEX idx_recommendations_user_status
  ON weekly_recommendations(user_id, status, created_at DESC);
CREATE INDEX idx_recommendations_campaign
  ON weekly_recommendations(campaign_id, created_at DESC);

-- search_term_reportsè¡¨ï¼ˆæœç´¢è¯æŠ¥å‘Šï¼‰
CREATE INDEX idx_search_terms_campaign_ctr
  ON search_term_reports(campaign_id, ctr DESC);
CREATE INDEX idx_search_terms_user_is_keyword
  ON search_term_reports(user_id, is_keyword);
```

### 3. èšåˆæŸ¥è¯¢æ›¿ä»£ä¸“ç”¨è¡¨

**é«˜CTRåˆ›æ„åˆ†æ**ï¼ˆAIå­¦ä¹ æ•°æ®æºï¼‰ï¼š
```sql
-- MVPé˜¶æ®µä½¿ç”¨SQLèšåˆæŸ¥è¯¢è·å–Topåˆ›æ„ï¼ˆéœ€è¦æ—¶æ‰§è¡Œï¼‰
-- âŒ ä¸åˆ›å»ºtop_performing_creativesä¸“ç”¨è¡¨
SELECT
  c.id AS creative_id,
  c.headline,
  c.description,
  AVG(cp.ctr) AS avg_ctr,
  SUM(cp.impressions) AS total_impressions,
  SUM(cp.clicks) AS total_clicks
FROM creatives c
JOIN campaigns cam ON c.campaign_id = cam.id
JOIN campaign_performance cp ON cp.campaign_id = cam.id
WHERE c.user_id = ?
  AND cp.impressions >= 1000
  AND cp.ctr >= 3.0
  AND cp.date >= date('now', '-30 days')
GROUP BY c.id
ORDER BY avg_ctr DESC
LIMIT 10;
```

**ä¼˜åŠ¿**ï¼š
- é¿å…å®šæ—¶ä»»åŠ¡ç»´æŠ¤top_performing_creativesè¡¨
- æ•°æ®å®æ—¶å‡†ç¡®ï¼ˆæ— åŒæ­¥å»¶è¿Ÿï¼‰
- å‡å°‘æ•°æ®åº“è¡¨æ•°é‡ï¼ˆç®€åŒ–æ¶æ„ï¼‰

### 4. æŸ¥è¯¢æ€§èƒ½é¢„æœŸ

âš ï¸ **é‡è¦**ï¼šä»¥ä¸‹æ€§èƒ½ç›®æ ‡éœ€é€šè¿‡å®é™…å‹æµ‹éªŒè¯ï¼ˆè§PERFORMANCE_TEST.mdï¼‰

**æ€§èƒ½ç›®æ ‡**ï¼ˆå¾…éªŒè¯ï¼‰ï¼š
- å•ä¸ªCampaignæ€§èƒ½æ•°æ®æŸ¥è¯¢ < 50ms
- èšåˆTop10åˆ›æ„æŸ¥è¯¢ < 100msï¼ˆ7å¤©æ•°æ®ï¼‰
- åˆ†é¡µåˆ—è¡¨APIï¼ˆ20æ¡/é¡µï¼‰< 100ms
- æ¯å‘¨å»ºè®®ç”Ÿæˆï¼ˆå•ä¸ªç”¨æˆ·ï¼‰< 500ms

**æµ‹è¯•åœºæ™¯**ï¼š
- 1000ä¸ªCampaigns + æ¯ä¸ªCampaign 90å¤©æ€§èƒ½æ•°æ®
- 10ç”¨æˆ·å¹¶å‘æŸ¥è¯¢æ€§èƒ½æ•°æ®
- 100æ¡æœç´¢è¯æŠ¥å‘Šåˆ†é¡µæŸ¥è¯¢

---

## âš ï¸ é£é™©ä¸åº”å¯¹

### é£é™©1ï¼šè§„åˆ™è¿‡äºç®€å•ï¼Œå»ºè®®ä¸å‡†ç¡®
**åº”å¯¹**ï¼š
- è®¾ç½®æœ€å°æ ·æœ¬é‡é˜ˆå€¼ï¼ˆå±•ç¤ºé‡>1000ï¼‰
- æä¾›è¯¦ç»†çš„æ•°æ®æ”¯æ’‘ï¼Œè®©ç”¨æˆ·è‡ªè¡Œåˆ¤æ–­
- è¿½è¸ªåº”ç”¨æ•ˆæœï¼ŒæŒç»­ä¼˜åŒ–è§„åˆ™

### é£é™©2ï¼šç”¨æˆ·ä¸ç†è§£å»ºè®®åŸå› 
**åº”å¯¹**ï¼š
- æä¾›è¯¦ç»†çš„é—®é¢˜åˆ†æå’Œæ•°æ®å¯¹æ¯”
- ä½¿ç”¨å¯è§†åŒ–å›¾è¡¨ï¼ˆè¶‹åŠ¿çº¿ã€å¯¹æ¯”æŸ±çŠ¶å›¾ï¼‰
- æä¾›"ä¸ºä»€ä¹ˆ"çš„è§£é‡Šï¼ˆè¡Œä¸šåŸºå‡†å¯¹æ¯”ï¼‰

### é£é™©3ï¼šè‡ªåŠ¨å»ºè®®ä¸ç”¨æˆ·ç­–ç•¥å†²çª
**åº”å¯¹**ï¼š
- æ‰€æœ‰æ“ä½œéœ€ç”¨æˆ·ç¡®è®¤ï¼Œä¸è‡ªåŠ¨æ‰§è¡Œ
- æä¾›"å¿½ç•¥"é€‰é¡¹ï¼Œç”¨æˆ·å¯é€‰æ‹©ä¸é‡‡çº³
- æ”¯æŒæ’¤é”€æ“ä½œï¼ˆæš‚åœåå¯é‡æ–°å¯ç”¨ï¼‰

---

## ğŸ“š é™„å½•ï¼šè§„åˆ™å¼•æ“è¯¦ç»†é€»è¾‘

### è§„åˆ™1ï¼šæš‚åœä½æ•ˆCampaign
```
è§¦å‘æ¡ä»¶ï¼š
  AND å±•ç¤ºé‡ >= 1000 (æ•°æ®å……è¶³)
  AND CTR < è¡Œä¸šå‡å€¼ * 0.5 (æ˜¾è‘—ä½äºå‡å€¼)
  AND è¿ç»­7å¤©CTRæ— æ”¹å–„è¶‹åŠ¿

ä¼˜å…ˆçº§ï¼šé«˜
å»ºè®®ï¼šç«‹å³æš‚åœ
é¢„æœŸå½±å“ï¼šèŠ‚çœé¢„ç®—
```

### è§„åˆ™2ï¼šå¢åŠ é«˜æ•ˆCampaigné¢„ç®—
```
è§¦å‘æ¡ä»¶ï¼š
  AND ROI > 200% (ç›ˆåˆ©æ˜¾è‘—)
  AND å½“å‰é¢„ç®— < $200/å¤© (æœ‰æ‰©å±•ç©ºé—´)
  AND CTR > è¡Œä¸šå‡å€¼ * 1.2 (è¡¨ç°ä¼˜å¼‚)

ä¼˜å…ˆçº§ï¼šé«˜
å»ºè®®ï¼šå¢åŠ é¢„ç®—30-40%
é¢„æœŸå½±å“ï¼šè½¬åŒ–é‡æå‡25-35%
```

### è§„åˆ™3ï¼šä¼˜åŒ–åˆ›æ„
```
è§¦å‘æ¡ä»¶ï¼š
  AND å±•ç¤ºé‡ >= 1000
  AND CTR >= è¡Œä¸šå‡å€¼ * 0.5
  AND CTR < è¡Œä¸šå‡å€¼ * 0.8

ä¼˜å…ˆçº§ï¼šä¸­
å»ºè®®ï¼šé‡æ–°ç”Ÿæˆåˆ›æ„
é¢„æœŸå½±å“ï¼šCTRæå‡20-30%
```

### è§„åˆ™4ï¼šé™ä½CPC
```
è§¦å‘æ¡ä»¶ï¼š
  AND CPC > åŒOfferå…¶ä»–å˜ä½“å¹³å‡å€¼ * 1.3
  AND è½¬åŒ–ç‡æ­£å¸¸

ä¼˜å…ˆçº§ï¼šä¸­
å»ºè®®ï¼šé™ä½å‡ºä»·10-15%
é¢„æœŸå½±å“ï¼šCPCé™ä½ï¼Œä¿æŒè½¬åŒ–é‡
```

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0 KISS Edition
**æœ€åæ›´æ–°**ï¼š2025-01-17
**ç»´æŠ¤è€…**ï¼šAutoAdsäº§å“å›¢é˜Ÿ
