# æ•°æ®åº“åˆå§‹åŒ–æŒ‡å—

## é—®é¢˜èƒŒæ™¯

ä¹‹å‰çš„æ•°æ®åº“åˆå§‹åŒ–å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. `npm run db:init` åªåˆ›å»ºè¡¨ç»“æ„ï¼Œä¸åˆ›å»ºç®¡ç†å‘˜è´¦å·
2. éœ€è¦æ‰‹åŠ¨è¿è¡Œé¢å¤–çš„è„šæœ¬æ¥åˆ›å»ºç®¡ç†å‘˜
3. å®¹æ˜“å¿˜è®°åˆ›å»ºç®¡ç†å‘˜å¯¼è‡´æ— æ³•ç™»å½•

## è§£å†³æ–¹æ¡ˆ

å·²ä¿®æ”¹ `scripts/init-database.ts`ï¼Œç°åœ¨ä¼šè‡ªåŠ¨ï¼š
1. åˆ›å»ºæ‰€æœ‰æ•°æ®åº“è¡¨ç»“æ„
2. æ’å…¥é»˜è®¤ç³»ç»Ÿé…ç½®
3. **è‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·**ï¼ˆä½¿ç”¨æ­£ç¡®çš„å¯†ç å“ˆå¸Œï¼‰

## æ•°æ®åº“åˆå§‹åŒ–

### å®Œæ•´åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

```bash
# åˆ é™¤æ—§æ•°æ®åº“å¹¶é‡æ–°åˆå§‹åŒ–
rm data/autoads.db*
npm run db:init
```

åˆå§‹åŒ–å®Œæˆåä¼šæ˜¾ç¤ºï¼š
```
âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
ğŸ‘¤ åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦å·...
âœ… é»˜è®¤ç®¡ç†å‘˜è´¦å·åˆ›å»ºæˆåŠŸ

ğŸ”‘ ç®¡ç†å‘˜ç™»å½•ä¿¡æ¯:
   ç”¨æˆ·å: autoads
   å¯†ç : K$j6z!9Tq@P2w#aR
   é‚®ç®±: admin@autoads.com
```

### ä»…åˆ›å»ºç®¡ç†å‘˜è´¦å·

å¦‚æœæ•°æ®åº“å·²å­˜åœ¨ï¼Œåªéœ€è¦åˆ›å»ºç®¡ç†å‘˜ï¼š

```bash
npx tsx scripts/init-admin.ts
```

## é»˜è®¤ç®¡ç†å‘˜ä¿¡æ¯

- **ç”¨æˆ·å**: `autoads`
- **å¯†ç **: `K$j6z!9Tq@P2w#aR`
- **é‚®ç®±**: `admin@autoads.com`
- **è§’è‰²**: `admin`
- **å¥—é¤**: `lifetime` (ç»ˆèº«ä¹°æ–­)
- **æœ‰æ•ˆæœŸ**: 2099-12-31

## éªŒè¯ç™»å½•

æµ‹è¯•ç®¡ç†å‘˜ç™»å½•æ˜¯å¦æ­£å¸¸ï¼š

```bash
npx tsx scripts/test-admin-login.ts
```

åº”è¯¥æ˜¾ç¤ºï¼š
```
âœ… ç™»å½•æˆåŠŸï¼
ğŸ‰ ç®¡ç†å‘˜è´¦æˆ·å¯ä»¥æ­£å¸¸ç™»å½•ï¼
```

## å¯†ç å“ˆå¸Œæœºåˆ¶

æ‰€æœ‰åˆ›å»ºç®¡ç†å‘˜çš„è„šæœ¬éƒ½ä½¿ç”¨ `bcrypt` å¼‚æ­¥å“ˆå¸Œï¼ˆ10è½®saltï¼‰ï¼š

- âœ… `init-database.ts` - ä½¿ç”¨ `hashPassword()` (å¼‚æ­¥)
- âœ… `init-admin.ts` - ä½¿ç”¨ `hashPassword()` (å¼‚æ­¥)
- âœ… `create-admin-user.ts` - ä½¿ç”¨ `bcrypt.hash()` (å¼‚æ­¥)

ç¡®ä¿å¯†ç å“ˆå¸Œçš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚

## æ•…éšœæ’é™¤

### ç™»å½•å¤±è´¥ 401 Unauthorized

**åŸå› **: å¯†ç å“ˆå¸Œä¸æ•°æ®åº“ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°ç”Ÿæˆç®¡ç†å‘˜è´¦å·
npx tsx scripts/init-admin.ts
```

æˆ–è€…ç›´æ¥é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š
```bash
rm data/autoads.db*
npm run db:init
```

### æ•°æ®åº“I/Oé”™è¯¯

**åŸå› **: WALæ–‡ä»¶æŸåæˆ–æ•°æ®åº“é”å®š

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ é™¤æ‰€æœ‰æ•°æ®åº“ç›¸å…³æ–‡ä»¶
rm data/autoads.db*

# é‡æ–°åˆå§‹åŒ–
npm run db:init
```

## å®‰å…¨å»ºè®®

1. âš ï¸ **é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç **
2. ğŸ”’ ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨é»˜è®¤å¯†ç 
3. ğŸ“ å¦¥å–„ä¿ç®¡ç®¡ç†å‘˜å‡­è¯
4. ğŸ” å®šæœŸæ›´æ¢å¯†ç 

## ç›¸å…³è„šæœ¬

- `scripts/init-database.ts` - å®Œæ•´æ•°æ®åº“åˆå§‹åŒ–ï¼ˆæ¨èï¼‰
- `scripts/init-admin.ts` - åˆ›å»º/æ›´æ–°ç®¡ç†å‘˜è´¦å·
- `scripts/create-admin-user.ts` - åˆ›å»ºç®¡ç†å‘˜ï¼ˆåˆ é™¤å·²å­˜åœ¨çš„ï¼‰
- `scripts/test-admin-login.ts` - æµ‹è¯•ç®¡ç†å‘˜ç™»å½•
