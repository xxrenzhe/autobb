# Google Ads API é…ç½®å…±äº«æ–¹æ¡ˆåˆ†æ

**åˆ†ææ—¥æœŸ**: 2025-11-21
**é—®é¢˜**: ç”¨æˆ·Aæ˜¯å¦å¯ä»¥å¤ç”¨autoadsç”¨æˆ·çš„Google Ads APIé…ç½®ï¼Ÿ

---

## ğŸ” å½“å‰å®ç°åˆ†æ

### ç°çŠ¶

æŸ¥çœ‹ `src/lib/keyword-planner.ts:34` å‘ç°ï¼š

```typescript
// Priority 1: Try autoads user config (user_id=1)
const autoadsUserId = 1  // ç¡¬ç¼–ç ï¼
```

**å…³é”®å‘ç°**:
- âœ… å½“å‰æ‰€æœ‰ç”¨æˆ·éƒ½åœ¨ä½¿ç”¨ `autoads` (user_id=1) çš„é…ç½®
- âŒ keyword-planner.ts æ²¡æœ‰æ¥æ”¶å½“å‰ç”¨æˆ·çš„ user_id å‚æ•°
- âŒ API endpoint ä¹Ÿæ²¡æœ‰ä¼ é€’ç”¨æˆ·èº«ä»½ä¿¡æ¯

### é…ç½®æ¥æºä¼˜å…ˆçº§

```
å½“å‰å®ç°ï¼ˆæ‰€æœ‰ç”¨æˆ·ï¼‰:
1. autoadsç”¨æˆ·é…ç½® (user_id=1, system_settings)
2. å…¨å±€é…ç½® (user_id=NULL, system_settings)
3. autoadsçš„OAuthå‡­è¯ (user_id=1, google_ads_credentials)
4. autoadsçš„è´¦æˆ· (user_id=1, google_ads_accounts)
5. ç¯å¢ƒå˜é‡ (.env)
```

---

## ğŸ“Š Google Ads API å‡­è¯ç±»å‹åˆ†æ

### å‡­è¯åˆ†ç±»

| å‡­è¯ | æ€§è´¨ | æ˜¯å¦å¯å…±äº« | è¯´æ˜ |
|------|------|-----------|------|
| **client_id** | OAuthåº”ç”¨å‡­è¯ | âœ… **å¯å…±äº«** | ä»£è¡¨å¹³å°åº”ç”¨ï¼Œæ‰€æœ‰ç”¨æˆ·å…±ç”¨ |
| **client_secret** | OAuthåº”ç”¨å‡­è¯ | âœ… **å¯å…±äº«** | åº”ç”¨å¯†é’¥ï¼Œæ‰€æœ‰ç”¨æˆ·å…±ç”¨ |
| **developer_token** | Google Ads APIä»¤ç‰Œ | âœ… **å¯å…±äº«** | å¹³å°çº§APIä»¤ç‰Œ |
| **login_customer_id** | MCCç®¡ç†è´¦æˆ·ID | âœ… **å¯å…±äº«** | å¦‚æœä½¿ç”¨å¹³å°MCCç®¡ç†æ‰€æœ‰å­è´¦æˆ· |
| **refresh_token** | ç”¨æˆ·æˆæƒä»¤ç‰Œ | âŒ **ä¸å¯å…±äº«** | ç”¨æˆ·æˆæƒå‡­è¯ï¼Œå¿…é¡»ç”¨æˆ·è‡ªå·±OAuth |
| **access_token** | è®¿é—®ä»¤ç‰Œ | âŒ **ä¸å¯å…±äº«** | ä»refresh_tokenåˆ·æ–°ï¼Œç”¨æˆ·çº§ |
| **customer_id** | Google Adsè´¦æˆ·ID | âŒ **ä¸å¯å…±äº«** | ç”¨æˆ·è‡ªå·±çš„å¹¿å‘Šè´¦æˆ· |

---

## ğŸ—ï¸ å¤šç§Ÿæˆ·æ¶æ„æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: å®Œå…¨å…±äº«ï¼ˆå½“å‰å®ç°ï¼‰

**é€‚ç”¨åœºæ™¯**: å¹³å°ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„å¹¿å‘Šè´¦æˆ·

```yaml
æ¶æ„:
  - å¹³å°æœ‰ä¸€ä¸ªMCCç®¡ç†è´¦æˆ·
  - æ‰€æœ‰ç”¨æˆ·çš„Google Adsè´¦æˆ·éƒ½ä½œä¸ºMCCçš„å­è´¦æˆ·
  - ä½¿ç”¨å¹³å°çš„OAuthå‡­è¯å’Œrefresh_token
  - ç”¨æˆ·åªéœ€è¦æä¾›è‡ªå·±çš„customer_id

ä¼˜ç‚¹:
  - ç”¨æˆ·æ— éœ€OAuthæˆæƒï¼Œä½¿ç”¨ç®€å•
  - å¹³å°ç»Ÿä¸€ç®¡ç†APIè°ƒç”¨
  - é…ç½®ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿

ç¼ºç‚¹:
  - ç”¨æˆ·æ— æ³•ä½¿ç”¨è‡ªå·±çš„Google Adsè´¦æˆ·
  - å¹³å°éœ€è¦åˆ›å»ºå’Œç®¡ç†æ‰€æœ‰å­è´¦æˆ·
  - ç”¨æˆ·æ•°æ®éš”ç¦»ä¾èµ–äºcustomer_idç­›é€‰
  - æ— æ³•æ”¯æŒç”¨æˆ·è‡ªå¸¦Google Adsè´¦æˆ·

å½“å‰å‚æ•°é…ç½®:
  client_id: autoads (å…±äº«) âœ…
  client_secret: autoads (å…±äº«) âœ…
  developer_token: autoads (å…±äº«) âœ…
  login_customer_id: autoadsçš„MCC (å…±äº«) âœ…
  refresh_token: autoadsçš„OAuthæˆæƒ (å…±äº«) âœ…
  customer_id: ç”¨æˆ·è‡ªå·±çš„è´¦æˆ·ID (ç”¨æˆ·çº§) âœ…
```

**å½“å‰å®ç°å°±æ˜¯è¿™ä¸ªæ–¹æ¡ˆï¼**

### æ–¹æ¡ˆ2: éƒ¨åˆ†å…±äº«ï¼ˆæ¨èSaaSæ¨¡å¼ï¼‰

**é€‚ç”¨åœºæ™¯**: æ”¯æŒç”¨æˆ·è‡ªå¸¦Google Adsè´¦æˆ·

```yaml
æ¶æ„:
  - åº”ç”¨å‡­è¯ï¼ˆclient_id, client_secret, developer_tokenï¼‰å¹³å°å…±äº«
  - ç”¨æˆ·è‡ªå·±å®ŒæˆOAuthæˆæƒè·å–refresh_token
  - ç”¨æˆ·ç®¡ç†è‡ªå·±çš„customer_id

ä¼˜ç‚¹:
  - ç”¨æˆ·å¯ä»¥ä½¿ç”¨è‡ªå·±çš„Google Adsè´¦æˆ·
  - æ•°æ®æƒé™æ¸…æ™°ï¼Œå®‰å…¨æ€§é«˜
  - ç¬¦åˆæ ‡å‡†SaaS OAuthæµç¨‹
  - çµæ´»æ€§é«˜ï¼Œæ”¯æŒä¸ªäººè´¦æˆ·å’Œä¼ä¸šè´¦æˆ·

ç¼ºç‚¹:
  - æ¯ä¸ªç”¨æˆ·éœ€è¦å®ŒæˆOAuthæˆæƒ
  - ç”¨æˆ·ä½“éªŒç¨å¤æ‚
  - éœ€è¦å¤„ç†å¤šç”¨æˆ·çš„tokenåˆ·æ–°

å»ºè®®å‚æ•°é…ç½®:
  client_id: å¹³å°å…¨å±€é…ç½® (user_id=NULL) âœ…
  client_secret: å¹³å°å…¨å±€é…ç½® (user_id=NULL) âœ…
  developer_token: å¹³å°å…¨å±€é…ç½® (user_id=NULL) âœ…
  login_customer_id:
    - é€‰é¡¹A: ç”¨æˆ·è‡ªå·±çš„MCC ID (ç”¨æˆ·çº§)
    - é€‰é¡¹B: å¹³å°MCC ID (å…¨å±€å…±äº«)
  refresh_token: ç”¨æˆ·OAuthæˆæƒ (ç”¨æˆ·çº§) âŒ å¿…é¡»ç”¨æˆ·è‡ªå·±
  customer_id: ç”¨æˆ·çš„è´¦æˆ·ID (ç”¨æˆ·çº§) âŒ å¿…é¡»ç”¨æˆ·è‡ªå·±
```

### æ–¹æ¡ˆ3: å®Œå…¨ç‹¬ç«‹ï¼ˆä¼ä¸šçº§ï¼‰

**é€‚ç”¨åœºæ™¯**: ä¼ä¸šå®¢æˆ·è‡ªå¸¦å®Œæ•´Google Ads APIå‡­è¯

```yaml
æ¶æ„:
  - æ¯ä¸ªä¼ä¸šå®¢æˆ·æœ‰è‡ªå·±çš„OAuthåº”ç”¨
  - æ¯ä¸ªå®¢æˆ·æœ‰è‡ªå·±çš„developer_token
  - å®Œå…¨ç‹¬ç«‹çš„Google Adsè´¦æˆ·ä½“ç³»

ä¼˜ç‚¹:
  - å®Œå…¨éš”ç¦»ï¼Œæœ€é«˜å®‰å…¨æ€§
  - ä¼ä¸šå¯ä»¥ä½¿ç”¨è‡ªå·±çš„Google Cloudé¡¹ç›®
  - APIé…é¢ç‹¬ç«‹ï¼Œä¸å—å¹³å°é™åˆ¶

ç¼ºç‚¹:
  - é…ç½®å¤æ‚ï¼Œå¯¹ç”¨æˆ·æŠ€æœ¯è¦æ±‚é«˜
  - éœ€è¦ç”³è¯·Google Ads APIè®¿é—®æƒé™
  - developer_tokenå®¡æ‰¹å¯èƒ½éœ€è¦æ•°å¤©

å‚æ•°é…ç½®:
  æ‰€æœ‰å‚æ•°éƒ½æ˜¯ç”¨æˆ·çº§åˆ« âŒ
```

---

## ğŸ¯ å‚æ•°å…±äº«å†³ç­–çŸ©é˜µ

### å¿…é¡»ç”¨æˆ·è‡ªå·±é…ç½®çš„å‚æ•°

| å‚æ•° | åŸå›  | æ–¹æ¡ˆ1å…±äº« | æ–¹æ¡ˆ2ç‹¬ç«‹ | æ–¹æ¡ˆ3ç‹¬ç«‹ |
|------|------|----------|----------|----------|
| **customer_id** | ç”¨æˆ·çš„å®é™…å¹¿å‘Šè´¦æˆ· | âœ… ç”¨æˆ·æä¾› | âœ… ç”¨æˆ·æä¾› | âœ… ç”¨æˆ·æä¾› |
| **refresh_token** | ç”¨æˆ·æˆæƒå‡­è¯ï¼Œä¸èƒ½å…±äº« | âš ï¸ å¹³å°å…±äº« | âŒ ç”¨æˆ·OAuth | âŒ ç”¨æˆ·OAuth |

### å¯ä»¥å…±äº«çš„å‚æ•°

| å‚æ•° | åŸå›  | æ–¹æ¡ˆ1 | æ–¹æ¡ˆ2 | æ–¹æ¡ˆ3 |
|------|------|------|------|------|
| **client_id** | OAuthåº”ç”¨å‡­è¯ | âœ… å…±äº« | âœ… å…±äº« | âŒ ç‹¬ç«‹ |
| **client_secret** | OAuthåº”ç”¨å¯†é’¥ | âœ… å…±äº« | âœ… å…±äº« | âŒ ç‹¬ç«‹ |
| **developer_token** | APIè®¿é—®ä»¤ç‰Œ | âœ… å…±äº« | âœ… å…±äº« | âŒ ç‹¬ç«‹ |
| **login_customer_id** | MCCç®¡ç†è´¦æˆ· | âœ… å…±äº« | âš ï¸ å¯é€‰ | âŒ ç‹¬ç«‹ |

---

## ğŸ’¡ å»ºè®®å®æ–½æ–¹æ¡ˆ

### å½“å‰ç³»ç»Ÿï¼šæ–¹æ¡ˆ1ï¼ˆå®Œå…¨å…±äº«ï¼‰

**å»ºè®®ä¿æŒç°çŠ¶ï¼Œç†ç”±**:

1. âœ… **ç®€åŒ–ç”¨æˆ·ä½“éªŒ**: ç”¨æˆ·æ— éœ€å¤æ‚çš„OAuthæˆæƒæµç¨‹
2. âœ… **ç»Ÿä¸€ç®¡ç†**: å¹³å°é›†ä¸­ç®¡ç†APIè°ƒç”¨å’Œé…é¢
3. âœ… **å¿«é€Ÿä¸Šæ‰‹**: ç”¨æˆ·åªéœ€æä¾›customer_idå³å¯ä½¿ç”¨
4. âœ… **å·²å®ç°**: å½“å‰ä»£ç å·²å®Œæ•´å®ç°æ­¤æ–¹æ¡ˆ

**å‰ææ¡ä»¶**:
- å¹³å°æœ‰MCCç®¡ç†è´¦æˆ·
- ç”¨æˆ·çš„Google Adsè´¦æˆ·æ˜¯å¹³å°MCCçš„å­è´¦æˆ·
- æˆ–è€…ç”¨æˆ·æ„¿æ„è®©å¹³å°è®¿é—®å…¶è´¦æˆ·

**æ•°æ®å®‰å…¨**:
- âœ… é€šè¿‡ `WHERE user_id = ?` ç¡®ä¿æ•°æ®éš”ç¦»
- âœ… customer_id ç”¨æˆ·çº§åˆ«ï¼Œä¸ä¼šæ··æ·†
- âš ï¸ éœ€è¦æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·ï¼šå¹³å°ä½¿ç”¨ç»Ÿä¸€OAuthå‡­è¯

### é•¿æœŸä¼˜åŒ–ï¼šæ”¯æŒæ–¹æ¡ˆ2ï¼ˆéƒ¨åˆ†å…±äº«ï¼‰

**å¦‚æœéœ€è¦æ”¯æŒç”¨æˆ·è‡ªå¸¦Google Adsè´¦æˆ·**ï¼Œå¯ä»¥å‡çº§ä¸ºæ–¹æ¡ˆ2ï¼š

#### ä¿®æ”¹1: ä¼ é€’ç”¨æˆ·IDåˆ°keyword-planner.ts

```typescript
// src/lib/keyword-planner.ts
export async function getKeywordSearchVolumes(
  keywords: string[],
  country: string,
  language: string,
  userId?: number  // æ–°å¢ï¼šå¯é€‰ç”¨æˆ·IDå‚æ•°
): Promise<KeywordVolume[]> {
  // ...
  const config = getGoogleAdsConfig(userId)
  // ...
}

function getGoogleAdsConfig(userId?: number): KeywordPlannerConfig | null {
  const db = getDatabase()
  const targetUserId = userId || 1  // é»˜è®¤å›é€€åˆ°autoadsç”¨æˆ·

  // ä¼˜å…ˆè¯»å–æŒ‡å®šç”¨æˆ·çš„é…ç½®
  const userConfigs = db.prepare(`...WHERE user_id = ?`).all(targetUserId)

  // å¦‚æœç”¨æˆ·æ²¡æœ‰é…ç½®ï¼Œå›é€€åˆ°å…¨å±€é…ç½®
  if (!hasUserConfig) {
    const globalConfigs = db.prepare(`...WHERE user_id IS NULL`).all()
  }
}
```

#### ä¿®æ”¹2: APIç«¯ç‚¹ä¼ é€’ç”¨æˆ·èº«ä»½

```typescript
// src/app/api/keywords/volume/route.ts
export async function GET(request: NextRequest) {
  // ä»middlewareæˆ–sessionè·å–å½“å‰ç”¨æˆ·ID
  const userId = request.headers.get('x-user-id')

  const volumes = await getKeywordSearchVolumes(
    keywords,
    country,
    language,
    userId ? parseInt(userId) : undefined
  )
}
```

#### ä¿®æ”¹3: é…ç½®è¿ç§»åˆ°å…¨å±€

```sql
-- å°†å¹³å°çº§é…ç½®è¿ç§»åˆ°user_id=NULL
UPDATE system_settings
SET user_id = NULL
WHERE user_id = 1
  AND category = 'google_ads'
  AND config_key IN ('client_id', 'client_secret', 'developer_token', 'login_customer_id');
```

---

## ğŸ” å®‰å…¨è€ƒè™‘

### refresh_token çš„ç‰¹æ®Šæ€§

**ä¸ºä»€ä¹ˆä¸èƒ½å…±äº«refresh_token**:

1. **æˆæƒä»£è¡¨**: refresh_tokenä»£è¡¨ç”¨æˆ·æ˜ç¡®æˆæƒå¹³å°è®¿é—®å…¶Google Adsè´¦æˆ·
2. **æƒé™èŒƒå›´**: å¯ä»¥è®¿é—®ç”¨æˆ·æ‰€æœ‰æœ‰æƒé™çš„Google Adsè´¦æˆ·
3. **å®‰å…¨é£é™©**: å…±äº«æ„å‘³ç€Aç”¨æˆ·å¯èƒ½è®¿é—®Bç”¨æˆ·çš„å¹¿å‘Šæ•°æ®
4. **Googleæ”¿ç­–**: è¿åOAuthæœ€ä½³å®è·µï¼Œå¯èƒ½å¯¼è‡´APIè®¿é—®è¢«ç¦

**æ–¹æ¡ˆ1çš„ä¾‹å¤–æƒ…å†µ**:
- å¦‚æœå¹³å°æ˜ç¡®è¯´æ˜"ä½¿ç”¨å¹³å°ç»Ÿä¸€ç®¡ç†è´¦æˆ·"
- ç”¨æˆ·çŸ¥æƒ…å¹¶åŒæ„
- ç”¨æˆ·çš„customer_idä¸¥æ ¼éš”ç¦»
- **è¿™æ˜¯åˆæ³•çš„ï¼Œä½†éœ€è¦ç”¨æˆ·åè®®æ˜ç¡®è¯´æ˜**

### customer_id çš„æ•°æ®éš”ç¦»

**å¿…é¡»ç¡®ä¿**:
```typescript
// æ‰€æœ‰Google Ads APIè°ƒç”¨å¿…é¡»åŒ…å«customer_idç­›é€‰
const response = await customer.query(`
  SELECT ...
  FROM ...
  WHERE customer.id = '${customerId}'  // ç”¨æˆ·çº§éš”ç¦»
`)

// æ•°æ®åº“æŸ¥è¯¢ä¹Ÿè¦åŒ…å«user_id
db.prepare(`
  SELECT * FROM google_ads_accounts
  WHERE user_id = ? AND customer_id = ?
`).all(userId, customerId)
```

---

## ğŸ“‹ å®æ–½æ£€æŸ¥æ¸…å•

### æ–¹æ¡ˆ1ï¼ˆå½“å‰ï¼‰ä¿æŒæ¸…å•

- [x] å¹³å°æœ‰æœ‰æ•ˆçš„MCCè´¦æˆ·
- [x] autoadsç”¨æˆ·å·²å®ŒæˆOAuthæˆæƒ
- [x] refresh_tokenå·²ä¿å­˜åˆ°google_ads_credentialsè¡¨
- [x] customer_idé€šè¿‡google_ads_accountsè¡¨ç®¡ç†
- [x] æ‰€æœ‰APIè°ƒç”¨åŒ…å«customer_idç­›é€‰
- [ ] **ç”¨æˆ·åè®®è¯´æ˜å¹³å°ç»Ÿä¸€ç®¡ç†**ï¼ˆå»ºè®®è¡¥å……ï¼‰
- [ ] **æ•°æ®éš”ç¦»å®¡è®¡**ï¼ˆå»ºè®®æ‰§è¡Œï¼‰

### æ–¹æ¡ˆ2å‡çº§æ¸…å•

- [ ] ä¿®æ”¹keyword-planner.tsæ”¯æŒç”¨æˆ·IDå‚æ•°
- [ ] APIç«¯ç‚¹ä¼ é€’å½“å‰ç”¨æˆ·èº«ä»½
- [ ] è¿ç§»å¹³å°é…ç½®åˆ°user_id=NULL
- [ ] å®ç°ç”¨æˆ·çº§OAuthæˆæƒæµç¨‹
- [ ] æ›´æ–°/settingsé¡µé¢æ”¯æŒç”¨æˆ·OAuth
- [ ] æ›´æ–°google_ads_credentialsè¡¨é€»è¾‘
- [ ] æ·»åŠ refresh_tokenè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- [ ] æµ‹è¯•å¤šç”¨æˆ·åœºæ™¯

---

## ğŸ¯ æ¨èç­”æ¡ˆ

### é—®é¢˜1: ç”¨æˆ·Aæ˜¯å¦å¯ä»¥å¤ç”¨autoadsç”¨æˆ·çš„é…ç½®ï¼Ÿ

**ç­”æ¡ˆ**: âœ… **å½“å‰å¯ä»¥ï¼Œä¸”å·²ç»åœ¨å¤ç”¨**

**åŸå› **:
1. keyword-planner.ts ç¡¬ç¼–ç è¯»å– `user_id=1` (autoads) çš„é…ç½®
2. æ‰€æœ‰ç”¨æˆ·éƒ½åœ¨ä½¿ç”¨autoadsçš„OAuthå‡­è¯
3. é€šè¿‡customer_idåŒºåˆ†ä¸åŒç”¨æˆ·çš„å¹¿å‘Šè´¦æˆ·

**å‰æ**:
- ç”¨æˆ·çš„Google Adsè´¦æˆ·åœ¨autoadsçš„MCCç®¡ç†ä¸‹
- æˆ–ç”¨æˆ·åŒæ„å¹³å°ä½¿ç”¨ç»Ÿä¸€OAuthå‡­è¯è®¿é—®

### é—®é¢˜2: å“ªäº›å‚æ•°å¿…é¡»ç”¨æˆ·è‡ªå·±é…ç½®ï¼Ÿ

**å¿…é¡»ç”¨æˆ·æä¾›**:
- âœ… **customer_id** - ç”¨æˆ·çš„Google Adsè´¦æˆ·IDï¼ˆå·²é€šè¿‡google_ads_accountsè¡¨ç®¡ç†ï¼‰

**å¦‚æœé‡‡ç”¨æ–¹æ¡ˆ2ï¼ˆç”¨æˆ·ç‹¬ç«‹OAuthï¼‰**:
- âŒ **refresh_token** - ç”¨æˆ·å¿…é¡»è‡ªå·±å®ŒæˆOAuthæˆæƒ
- âš ï¸ **login_customer_id** - å¦‚æœç”¨æˆ·æœ‰è‡ªå·±çš„MCCè´¦æˆ·

**å¯ä»¥å…±äº«ï¼ˆå½“å‰æ–¹æ¡ˆ1ï¼‰**:
- âœ… client_id, client_secret, developer_token - å¹³å°åº”ç”¨å‡­è¯
- âœ… login_customer_id - å¹³å°MCCè´¦æˆ·
- âœ… refresh_token - å¹³å°ç»Ÿä¸€OAuthæˆæƒ

---

## ğŸ“Š é…ç½®å…±äº«æ€»ç»“è¡¨

| å‚æ•° | æ–¹æ¡ˆ1å½“å‰çŠ¶æ€ | æ–¹æ¡ˆ2æ¨è | ç”¨æˆ·Aæ˜¯å¦å¿…é¡»é…ç½® |
|------|-------------|----------|-----------------|
| client_id | autoadså…±äº« | å¹³å°å…¨å±€å…±äº« | âŒ å¦ï¼ˆå…±äº«ï¼‰ |
| client_secret | autoadså…±äº« | å¹³å°å…¨å±€å…±äº« | âŒ å¦ï¼ˆå…±äº«ï¼‰ |
| developer_token | autoadså…±äº« | å¹³å°å…¨å±€å…±äº« | âŒ å¦ï¼ˆå…±äº«ï¼‰ |
| login_customer_id | autoadså…±äº« | å¹³å°å…±äº«/ç”¨æˆ·ç‹¬ç«‹ | âŒ å¦ï¼ˆå¯å…±äº«ï¼‰ |
| **refresh_token** | **autoadså…±äº«** | **ç”¨æˆ·ç‹¬ç«‹OAuth** | âš ï¸ æ–¹æ¡ˆ1å¦ï¼Œæ–¹æ¡ˆ2æ˜¯ |
| **customer_id** | **ç”¨æˆ·æä¾›** | **ç”¨æˆ·æä¾›** | âœ… **æ˜¯ï¼ˆå¿…é¡»ï¼‰** |

---

## ğŸ’¡ æœ€ç»ˆå»ºè®®

### çŸ­æœŸï¼ˆä¿æŒå½“å‰æ–¹æ¡ˆ1ï¼‰

âœ… **ç»§ç»­ä½¿ç”¨autoadsç»Ÿä¸€é…ç½®**

**ç†ç”±**:
1. ç”¨æˆ·ä½“éªŒæœ€ç®€å•
2. å·²å®Œæ•´å®ç°
3. é€‚åˆå¹³å°ç»Ÿä¸€ç®¡ç†æ¨¡å¼

**éœ€è¦åšçš„**:
1. åœ¨ç”¨æˆ·åè®®ä¸­è¯´æ˜å¹³å°ä½¿ç”¨ç»Ÿä¸€OAuthå‡­è¯
2. ç¡®ä¿customer_idçº§åˆ«çš„æ•°æ®éš”ç¦»
3. å®šæœŸå®¡è®¡æ•°æ®è®¿é—®æƒé™

### é•¿æœŸï¼ˆå‡çº§åˆ°æ–¹æ¡ˆ2ï¼‰

âš ï¸ **å¦‚æœéœ€è¦æ”¯æŒç”¨æˆ·è‡ªå¸¦Google Adsè´¦æˆ·**

**å®æ–½æ­¥éª¤**:
1. è¿ç§»å¹³å°é…ç½®åˆ°å…¨å±€ (user_id=NULL)
2. ä¿®æ”¹ä»£ç æ”¯æŒç”¨æˆ·çº§é…ç½®
3. å®ç°ç”¨æˆ·OAuthæˆæƒæµç¨‹
4. é€æ­¥è¿ç§»ç°æœ‰ç”¨æˆ·

**é¢„è®¡å·¥ä½œé‡**: 3-5å¤©å¼€å‘ + æµ‹è¯•

---

**ç»“è®º**: å½“å‰ç³»ç»Ÿé‡‡ç”¨æ–¹æ¡ˆ1ï¼ˆå®Œå…¨å…±äº«ï¼‰ï¼Œç”¨æˆ·Aå¯ä»¥ç›´æ¥å¤ç”¨autoadsé…ç½®ï¼Œåªéœ€æä¾›è‡ªå·±çš„customer_idã€‚è¿™æ˜¯åˆç†çš„è®¾è®¡é€‰æ‹©ï¼Œé€‚åˆå¹³å°ç»Ÿä¸€ç®¡ç†æ¨¡å¼ã€‚å¦‚æœæœªæ¥éœ€è¦æ”¯æŒç”¨æˆ·è‡ªå¸¦è´¦æˆ·ï¼Œå¯ä»¥å‡çº§åˆ°æ–¹æ¡ˆ2ã€‚
